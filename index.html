<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="content-language" content="ko">
    <meta name="geo.region" content="KR">
    <meta name="format-detection" content="telephone=no">
    <meta name="theme-color" content="#10a37f">
    <title>ë¡œë˜ë‹¹ì²¨ë²ˆí˜¸ ì¡°í•©ê¸° - ê³¼í•™ì  ë°ì´í„° ë¶„ì„ ê¸°ë°˜ ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°</title>
    <meta name="description" content="1,000íšŒ ì´ìƒì˜ ë¡œë˜ ì¶”ì²¨ ë°ì´í„°ë¥¼ ê³¼í•™ì ìœ¼ë¡œ ë¶„ì„í•œ ë¬´ë£Œ ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°. ë‹¹ì²¨ íŒ¨í„´ ë¶„ì„, í™•ë¥  í†µê³„, ë²ˆí˜¸ ì„ íƒ ì „ëµê¹Œì§€ ëª¨ë“  ê²ƒì„ ì œê³µí•©ë‹ˆë‹¤.">
    <meta name="keywords" content="ë¡œë˜ë²ˆí˜¸ìƒì„±ê¸°, ë¡œë˜ë‹¹ì²¨ë²ˆí˜¸ì¡°í•©ê¸°, ë¡œë˜ë²ˆí˜¸ì¶”ì²œ, ë¡œë˜ë¶„ì„, ë¡œë˜í†µê³„, ë‹¹ì²¨ë²ˆí˜¸ì¡°íšŒ, ë¡œë˜ë‹¹ì²¨ê¸ˆ, ë¡œë˜645, ë¬´ë£Œë¡œë˜, í–‰ìš´ë²ˆí˜¸, ë¡œë˜ë²ˆí˜¸íŒ¨í„´, ë¡œë˜ë‹¹ì²¨í™•ë¥ , ë¡œë˜ë²ˆí˜¸ë¶„ì„, ê³¼í•™ì ë¡œë˜, ë°ì´í„°ë¡œë˜">
    <meta name="robots" content="index, follow">
    <meta name="author" content="ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°">
    <meta name="generator" content="ë¡œë˜ë‹¹ì²¨ë²ˆí˜¸ ì¡°í•©ê¸° v2.0">
    <link rel="canonical" href="https://url.kr/p/lotto/">
    <link rel="alternate" hreflang="ko" href="https://url.kr/p/lotto/">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="ë¡œë˜ë‹¹ì²¨ë²ˆí˜¸ ì¡°í•©ê¸° - ê³¼í•™ì  ë°ì´í„° ë¶„ì„ ê¸°ë°˜ ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°">
    <meta property="og:description" content="1,000íšŒ ì´ìƒì˜ ë¡œë˜ ì¶”ì²¨ ë°ì´í„°ë¥¼ ê³¼í•™ì ìœ¼ë¡œ ë¶„ì„í•œ ë¬´ë£Œ ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°. ë‹¹ì²¨ íŒ¨í„´ ë¶„ì„ë¶€í„° ë²ˆí˜¸ ì„ íƒ ì „ëµê¹Œì§€!">
    <meta property="og:url" content="https://url.kr/p/lotto/">
    <meta property="og:image" content="https://url.kr/p/lotto/lotto.webp">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="ë¡œë˜ë‹¹ì²¨ë²ˆí˜¸ ì¡°í•©ê¸°">
    <meta property="og:locale" content="ko_KR">
    <meta property="article:author" content="ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°">
    <meta property="article:section" content="ë¡œë˜">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ë¡œë˜ë‹¹ì²¨ë²ˆí˜¸ ì¡°í•©ê¸° - ê³¼í•™ì  ë°ì´í„° ë¶„ì„ ê¸°ë°˜ ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°">
    <meta name="twitter:description" content="1,000íšŒ ì´ìƒì˜ ë¡œë˜ ì¶”ì²¨ ë°ì´í„°ë¥¼ ê³¼í•™ì ìœ¼ë¡œ ë¶„ì„í•œ ë¬´ë£Œ ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°. ë‹¹ì²¨ íŒ¨í„´ ë¶„ì„ë¶€í„° ë²ˆí˜¸ ì„ íƒ ì „ëµê¹Œì§€!">
    <meta name="twitter:image" content="https://url.kr/p/lotto/lotto.webp">
    <script type="application/ld+json">{"@context": "https://schema.org","@type": "WebApplication","name": "ë¡œë˜ë‹¹ì²¨ë²ˆí˜¸ ì¡°í•©ê¸°","alternateName": "ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°/ì¶”ì¶œê¸°","description": "1,000íšŒ ì´ìƒì˜ ë¡œë˜ ì¶”ì²¨ ë°ì´í„°ë¥¼ ê³¼í•™ì ìœ¼ë¡œ ë¶„ì„í•œ ë¬´ë£Œ ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°. ë‹¹ì²¨ íŒ¨í„´ ë¶„ì„, í™•ë¥  í†µê³„, ë²ˆí˜¸ ì„ íƒ ì „ëµê¹Œì§€ ëª¨ë“  ê²ƒì„ ì œê³µí•©ë‹ˆë‹¤.","url": "https://url.kr/p/lotto/","applicationCategory": "Lottery Tool","operatingSystem": "Any","browserRequirements": "Requires JavaScript","hasPart": {"@type": "FAQPage","mainEntity": [{"@type": "Question","name": "ë¡œë˜ ì¶”ì²¨ì€ ì–¸ì œ ì§„í–‰ë˜ë‚˜ìš”?","acceptedAnswer": {"@type": "Answer","text": "ë§¤ì£¼ í† ìš”ì¼ ì˜¤í›„ 8ì‹œ 45ë¶„ì— MBCì—ì„œ ìƒë°©ì†¡ìœ¼ë¡œ ì¶”ì²¨ì´ ì§„í–‰ë©ë‹ˆë‹¤."}},{"@type": "Question","name": "ë‹¹ì²¨ê¸ˆì€ ì–´ë–»ê²Œ ìˆ˜ë ¹í•˜ë‚˜ìš”?","acceptedAnswer": {"@type": "Answer","text": "ë‹¹ì²¨ê¸ˆì•¡ì— ë”°ë¼ ë¡œë˜ íŒë§¤ì (5ë§Œì› ì´í•˜), ë†í˜‘ì€í–‰(5ë§Œì› ì´ˆê³¼ ~ 1ì–µì› ë¯¸ë§Œ), ë™í–‰ë³µê¶Œ ë³¸ì‚¬(1ì–µì› ì´ìƒ)ì—ì„œ ìˆ˜ë ¹ ê°€ëŠ¥í•©ë‹ˆë‹¤."}},{"@type": "Question","name": "1ë“± ë‹¹ì²¨ í™•ë¥ ì€ ì–¼ë§ˆì¸ê°€ìš”?","acceptedAnswer": {"@type": "Answer","text": "1ë“± ë‹¹ì²¨ í™•ë¥ ì€ 1/8,145,060ì…ë‹ˆë‹¤. 6ê°œ ë²ˆí˜¸ê°€ ëª¨ë‘ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤."}},{"@type": "Question","name": "ë‹¹ì²¨ê¸ˆì— ì„¸ê¸ˆì€ ì–¼ë§ˆë‚˜ ë¶€ê³¼ë˜ë‚˜ìš”?","acceptedAnswer": {"@type": "Answer","text": "ë‹¹ì²¨ê¸ˆì´ 3ì–µì› ì´í•˜ëŠ” 22%, 3ì–µì› ì´ˆê³¼ëŠ” 33%ì˜ ì„¸ê¸ˆì´ ì›ì²œì§•ìˆ˜ë©ë‹ˆë‹¤."}}]}}</script>
    <script type="application/ld+json">{"@context": "https://schema.org","@type": "Article","headline": "ê³¼í•™ì  ë°ì´í„° ë¶„ì„ìœ¼ë¡œ ë¡œë˜ ë‹¹ì²¨ í™•ë¥  ë†’ì´ëŠ” ë°©ë²•","description": "1,000íšŒê°€ ë„˜ëŠ” ë¡œë˜ ì¶”ì²¨ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ë°œê²¬í•œ ë‹¹ì²¨ íŒ¨í„´ê³¼ ë²ˆí˜¸ ì„ íƒ ì „ëµì„ ê³µê°œí•©ë‹ˆë‹¤.","author": {"@type": "Organization","name": "ë¡œë˜ë‹¹ì²¨ë²ˆí˜¸ ì¡°í•©ê¸°"},"publisher": {"@type": "Organization","name": "ë¡œë˜ë‹¹ì²¨ë²ˆí˜¸ ì¡°í•©ê¸°","url": "https://url.kr/p/lotto/"},"datePublished": "2025-05-24","dateModified": "2025-05-24"}</script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"></noscript>
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"></noscript>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            overflow-x: hidden; /* Prevent horizontal scroll from 3D elements */
        }
        .hero-header {
            position: relative;
            background: linear-gradient(45deg, #10a37f, #0a7356);
            color: white;
            overflow: hidden;
        }
        .hero-bg-animation {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://placehold.co/1920x1080/10A37F/FFFFFF?text=Lotto+Pattern') no-repeat center center/cover;
            opacity: 0.1;
            animation: pan 20s linear infinite alternate;
        }
        @keyframes pan {
            0% { background-position: 0% 0%; }
            100% { background-position: 100% 100%; }
        }
        .hero-content {
            z-index: 10;
        }
        .hero-badge {
            background-color: rgba(255, 255, 255, 0.2);
            padding: 0.4rem 0.8rem;
            border-radius: 50px;
            font-size: 0.9em;
            display: inline-flex;
            align-items: center;
        }
        .hero-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #aabed1;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2), 0 0 5px rgba(170, 190, 209, 0.5);
        }
        .hero-subtitle {
            font-size: 1.5rem;
            font-weight: 500;
            opacity: 0.9;
        }
        .hero-description {
            font-size: 1.1rem;
            line-height: 1.6;
        }
        .hero-stats .stat-item {
            background-color: rgba(255, 255, 255, 0.15);
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
        }
        .hero-stats .stat-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: #ffeb3b;
        }
        .hero-stats .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        .hero-visual {
            position: relative;
            height: 250px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .hero-icon {
            font-size: 6rem;
            color: rgba(255, 255, 255, 0.3);
            position: absolute;
            animation: pulse 2s infinite alternate;
        }
        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.3; }
            100% { transform: scale(1.1); opacity: 0.5; }
        }
        .floating-numbers {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        .floating-ball {
            position: absolute;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            animation: float 10s infinite ease-in-out alternate;
            transition: background-color 0.3s ease, transform 0.2s ease-out, box-shadow 0.2s ease-out;
        }
        .floating-ball.ball-1 { background-color: #FFD700; }
        .floating-ball.ball-2 { background-color: #1E90FF; }
        .floating-ball.ball-3 { background-color: #DC143C; }
        .floating-ball.ball-4 { background-color: #6A5ACD; }
        .floating-ball.ball-5 { background-color: #32CD32; }
        .floating-ball.ball-6 { background-color: #FF4500; }
        .floating-ball.ball-1 { width: 50px; height: 50px; top: 10%; left: 5%; animation-delay: 0s; }
        .floating-ball.ball-2 { width: 45px; height: 45px; top: 30%; right: 10%; animation-delay: 1s; }
        .floating-ball.ball-3 { width: 60px; height: 60px; bottom: 20%; left: 20%; animation-delay: 2s; }
        .floating-ball.ball-4 { width: 55px; height: 55px; top: 5%; right: 30%; animation-delay: 3s; }
        .floating-ball.ball-5 { width: 40px; height: 40px; bottom: 5%; left: 40%; animation-delay: 4s; }
        .floating-ball.ball-6 { width: 65px; height: 65px; top: 40%; left: 45%; animation-delay: 5s; }
        @keyframes float {
            0% { transform: translate(0px, 0px) rotate(0deg); }
            25% { transform: translate(15px, -25px) rotate(15deg); }
            50% { transform: translate(0px, -40px) rotate(0deg); }
            75% { transform: translate(-15px, -25px) rotate(-15deg); }
            100% { transform: translate(0px, 0px) rotate(0deg); }
        }
        .floating-ball:hover {
            transform: scale(1.2) translateY(-10px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.5);
            cursor: pointer;
        }
        .lotto-preview {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 80px;
            gap: 0.5rem;
        }
        /* New and improved strongPopIn animation */
        @keyframes strongPopIn {
            0% { transform: scale(0.2) translateY(80px); opacity: 0; filter: blur(10px); }
            30% { transform: scale(1.4) translateY(-30px); opacity: 1; filter: blur(0px); box-shadow: 0 10px 25px rgba(0,0,0,0.5); }
            50% { transform: scale(0.9) translateY(10px); }
            70% { transform: scale(1.1) translateY(-5px); }
            100% { transform: scale(1) translateY(0); opacity: 1; filter: blur(0px); box-shadow: inset -3px -3px 5px rgba(0,0,0,0.2); }
        }
        .lotto-ball-preview {
            width: 4rem;
            height: 4rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            font-size: 1.5rem;
            box-shadow: inset -3px -3px 5px rgba(0,0,0,0.2);
            transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
            animation: strongPopIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; /* Applied animation */
            opacity: 0; /* Start hidden for animation */
        }
        .lotto-ball-preview:nth-child(1) { animation-delay: 0.0s; }
        .lotto-ball-preview:nth-child(2) { animation-delay: 0.07s; }
        .lotto-ball-preview:nth-child(3) { animation-delay: 0.14s; }
        .lotto-ball-preview:nth-child(4) { animation-delay: 0.21s; }
        .lotto-ball-preview:nth-child(5) { animation-delay: 0.28s; }
        .lotto-ball-preview:nth-child(6) { animation-delay: 0.35s; }
        .lotto-ball-preview:nth-child(7) { animation-delay: 0.42s; }
        .lotto-ball-preview:hover,
        .lotto-ball-small:hover {
            transform: scale(1.1) translateY(-4px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.4);
            cursor: pointer;
        }
        .lotto-history-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: #f8f9fa;
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            margin-bottom: 0.5rem;
            transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
        }
        .lotto-history-numbers .lotto-ball-small {
            width: 1.8rem;
            height: 1.8rem;
            font-size: 0.8rem;
            margin-right: 0.25rem;
            box-shadow: inset -2px -2px 3px rgba(0,0,0,0.15);
            animation: strongPopIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; /* Applied animation */
            opacity: 0; /* Start hidden for animation */
        }
        .lotto-ball-small {
            width: 2.75rem;
            height: 2.75rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            font-size: 1rem;
            box-shadow: inset -3px -3px 5px rgba(0,0,0,0.2);
            transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
            animation: strongPopIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; /* Applied animation */
            opacity: 0; /* Start hidden for animation */
        }
        .lotto-history-numbers .lotto-ball-small:nth-child(1) { animation-delay: 0.0s; }
        .lotto-history-numbers .lotto-ball-small:nth-child(2) { animation-delay: 0.07s; }
        .lotto-history-numbers .lotto-ball-small:nth-child(3) { animation-delay: 0.14s; }
        .lotto-history-numbers .lotto-ball-small:nth-child(4) { animation-delay: 0.21s; }
        .lotto-history-numbers .lotto-ball-small:nth-child(5) { animation-delay: 0.28s; }
        .lotto-history-numbers .lotto-ball-small:nth-child(6) { animation-delay: 0.35s; }
        .lotto-history-numbers .lotto-ball-small:nth-child(7) { animation-delay: 0.42s; }
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-radius: 50%;
            border-top-color: #10a37f;
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 500px;
            max-height: 80vh;
        }
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type="number"] {
            -moz-appearance: textfield;
        }
        .number-input-grid div {
            width: 40px;
            height: 40px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s, transform 0.2s;
        }
        .number-input-grid div:hover {
            background-color: #e0f2f7;
            transform: translateY(-2px);
        }
        .number-input-grid div.bg-blue-500 {
            background-color: #3b82f6;
            color: white;
        }
        /* Custom Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            visibility: hidden;
            opacity: 0;
            transition: visibility 0s, opacity 0.3s;
        }
        .modal-overlay.show {
            visibility: visible;
            opacity: 1;
        }
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 400px;
            width: 90%;
        }
        .modal-content button {
            background-color: #2563eb;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            margin-top: 1.5rem;
            transition: background-color 0.2s;
        }
        .modal-content button:hover {
            background-color: #1d4ed8;
        }
        .related-content-section {
            background: linear-gradient(to right, #6dd5ed, #2193b0);
            color: white;
        }
        .insight-card {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 2rem;
            color: #333;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .gambling-warning {
            background-color: #fefcbf;
            border-left: 5px solid #facc15;
            color: #78350f;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-top: 2rem;
            display: flex;
            align-items: center;
        }
        .gambling-warning i {
            margin-right: 1rem;
            color: #facc15;
            font-size: 1.5rem;
        }
        /* AI Analysis Modal Specific Styles */
        #ai-analysis-modal-content {
            max-width: 600px;
            text-align: left;
        }
        #ai-analysis-text {
            font-size: 1.1em;
            line-height: 1.6;
            margin-top: 1rem;
            color: #4a5568;
        }
        #ai-analysis-loading {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100px;
            font-size: 1.1em;
            color: #4a5568;
        }
        /* Added for FAQ Answer Display */
        #faqAnswerDisplay {
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
            font-weight: 500;
            flex-direction: column;
        }
        #faqAnswerDisplay p {
            margin-bottom: 0.5rem;
            text-align: left;
            width: 100%;
        }
        #faqAnswerDisplay p:first-child {
            font-weight: bold;
            color: #2563eb;
        }
        .faq-example-item {
            cursor: pointer;
            padding: 0.5rem 0.75rem;
            margin: 0.25rem;
            background-color: #e0f7fa;
            border-radius: 0.5rem;
            font-size: 0.9rem;
            color: #00796b;
            transition: background-color 0.2s ease, transform 0.1s ease;
            display: inline-block;
        }
        .faq-example-item:hover {
            background-color: #b2ebf2;
            transform: translateY(-2px);
        }
        /* Styles for the 3D containers */
        .main-content-wrapper {
            position: relative; /* Allows positioning children absolutely within this wrapper */
            display: flex;
            width: 100%; /* Take full width */
            min-height: 100vh; /* Ensure it takes full viewport height for 3D elements */
        }
        .side-3d-container {
            width: 25vw; /* Each side takes 25% of viewport width on large screens */
            height: 100%; /* Take full height of its parent (.main-content-wrapper) */
            position: sticky; /* Make it sticky */
            top: 0; /* Stick to the top */
            z-index: 0; /* Ensure it's behind main content */
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .side-3d-container canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100% !important; /* Override inline style from Three.js */
            height: 100% !important; /* Override inline style from Three.js */
            display: block;
        }
        /* Central content container now takes remaining width */
        .central-content-container {
            flex-grow: 1; /* Take up all available space */
            /* Removed fixed max-width to allow it to expand more */
            margin-left: auto;
            margin-right: auto;
            z-index: 1; /* Ensure it's above 3D elements */
            background-color: transparent; /* Make background transparent to see 3D */
            position: relative; /* For proper stacking context */
        }

        @media (max-width: 992px) { /* Adjust for medium and small screens */
            .side-3d-container {
                display: none !important; /* Hide 3D containers on smaller screens */
            }
            .central-content-container {
                width: 100%; /* Full width on smaller screens */
            }
        }
    </style>
</head>
<body class="d-flex flex-column min-vh-100">
    <header class="hero-header">
        <div class="hero-bg-animation"></div>
        <div class="container position-relative">
            <div class="row align-items-center min-vh-50">
                <div class="col-lg-6">
                    <div class="hero-content">
                        <div class="hero-badge mb-3">
                            <i class="bi bi-stars me-2"></i>
                            <span>ê³¼í•™ì  ë°ì´í„° ë¶„ì„ ê¸°ë°˜</span>
                        </div>
                        <h1 class="hero-title mb-3">
                            ë¬´ë£Œ ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°
                            <div class="hero-subtitle">ë‹¹ì²¨ í™•ë¥ ì„ ë†’ì´ëŠ” ìŠ¤ë§ˆíŠ¸í•œ ì„ íƒ</div>
                        </h1>
                        <p class="hero-description mb-4">
                            1,000íšŒ ì´ìƒì˜ ì¶”ì²¨ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ë§Œë“  <strong>ê³¼í•™ì  ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°</strong>ì…ë‹ˆë‹¤.
                            ë‹¹ì²¨ íŒ¨í„´ ë¶„ì„ê³¼ í™•ë¥  í†µê³„ë¥¼ ë°”íƒ•ìœ¼ë¡œ ìµœì ì˜ ë²ˆí˜¸ ì¡°í•©ì„ ì œì•ˆí•©ë‹ˆë‹¤.
                        </p>
                        <div class="hero-stats">
                            <div class="row g-3">
                                <div class="col-4">
                                    <div class="stat-item">
                                        <div class="stat-number">1,172+</div>
                                        <div class="stat-label">ë¶„ì„ íšŒì°¨</div>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="stat-item">
                                        <div class="stat-number">26%</div>
                                        <div class="stat-label">í™•ë¥  ê°œì„ </div>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="stat-item">
                                        <div class="stat-number">ë¬´ë£Œ</div>
                                        <div class="stat-label">í‰ìƒ ì´ìš©</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="hero-visual">
                        <div class="floating-numbers">
                            <div class="floating-ball ball-1">7</div>
                            <div class="floating-ball ball-2">23</div>
                            <div class="floating-ball ball-3">31</div>
                            <div class="floating-ball ball-4">42</div>
                            <div class="floating-ball ball-5">15</div>
                            <div class="floating-ball ball-6">38</div>
                        </div>
                        <div class="hero-icon">
                            <i class="bi bi-lightning-charge"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main content area, now flanked by 3D canvases -->
    <main class="flex-grow-1 py-4 d-flex main-content-wrapper">
        <!-- Left 3D Container for Announcer -->
        <div id="left-3d-container" class="side-3d-container bg-blue-50 d-none d-lg-flex justify-content-center align-items-center">
            <canvas id="announcerCanvas"></canvas>
        </div>

        <!-- Central Content Container -->
        <div class="central-content-container">
            <!-- Content wrapped in container-fluid to manage width and padding -->
            <div class="container-fluid px-md-5">
                <div class="card shadow-sm mb-4">
                    <div class="card-body text-center">
                        <h5 class="card-title mb-3">ë¡œë˜ ë²ˆí˜¸ ìƒì„±</h5>
                        <p class="text-muted mb-4">ì›í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ í–‰ìš´ì˜ ë²ˆí˜¸ë¥¼ ìƒì„±í•´ë³´ì„¸ìš”!</p>

                        <!-- ë¹ ë¥¸ ë²ˆí˜¸ ìƒì„± ì„¹ì…˜ -->
                        <div class="bg-blue-50 p-6 rounded-xl shadow-inner mb-6">
                            <h6 class="text-xl font-bold mb-3 text-blue-800">âœ¨ ë¹ ë¥¸ ë²ˆí˜¸ ìƒì„±</h6>
                            <p class="text-blue-700 mb-4">ë³µì¡í•œ ì„¤ì • ì—†ì´, í´ë¦­ í•œ ë²ˆìœ¼ë¡œ ë¡œë˜ ë²ˆí˜¸ë¥¼ ë°›ì•„ë³´ì„¸ìš”!</p>
                            <div class="row justify-content-center mb-4">
                                <div class="col-md-6">
                                    <label for="quick-num-sets" class="form-label font-medium text-gray-700">ìƒì„±í•  ì¡°í•© ìˆ˜</label>
                                    <select id="quick-num-sets" class="form-select">
                                        <option value="1">1ê°œ</option>
                                        <option value="2">2ê°œ</option>
                                        <option value="3">3ê°œ</option>
                                        <option value="4">4ê°œ</option>
                                        <option value="5" selected>5ê°œ</option>
                                        <option value="6">6ê°œ</option>
                                        <option value="7">7ê°œ</option>
                                        <option value="8">8ê°œ</option>
                                        <option value="9">9ê°œ</option>
                                        <option value="10">10ê°œ</option>
                                    </select>
                                </div>
                            </div>
                            <button id="quick-generate-btn" class="btn btn-primary btn-lg"><i class="bi bi-shuffle"></i> ë¹ ë¥¸ ë²ˆí˜¸ ìƒì„±í•˜ê¸°</button>
                        </div>

                        <!-- ìƒì„±ëœ ë²ˆí˜¸ ê²°ê³¼ í‘œì‹œ ì˜ì—­ -->
                        <div class="mb-4 mt-5">
                            <div id="lottoNumbers" class="lotto-preview flex flex-col items-center">
                                <div class="loading-spinner"></div>
                            </div>
                        </div>
                        <div id="copy-status" class="text-center text-success fw-bold my-2"></div>
                        <div class="d-grid gap-2 d-md-flex justify-content-center mt-3">
                            <button id="copy-generated-btn" class="btn btn-success btn-sm"><i class="bi bi-clipboard"></i> ìƒì„±ëœ ë²ˆí˜¸ ëª¨ë‘ ë³µì‚¬</button>
                            <button id="analyze-numbers-btn" class="btn btn-warning btn-sm"><i class="bi bi-robot"></i>âœ¨ AI ë²ˆí˜¸ ë¶„ì„</button>
                        </div>
                        <div id="ai-analysis-result" class="text-center mt-3 p-3 bg-light rounded shadow-sm d-none">
                            <p class="fw-bold mb-2 text-primary">âœ¨ AIì˜ ë¶„ì„ ê²°ê³¼:</p>
                            <div id="ai-analysis-content" class="text-break">ë¶„ì„ ë‚´ìš©</div>
                        </div>

                        <hr class="my-6">

                        <!-- ë™í–‰ë³µê¶Œ í™ˆí˜ì´ì§€ ë°”ë¡œê°€ê¸° ë²„íŠ¼ ì¶”ê°€ -->
                        <div class="text-center mb-5">
                            <a href="https://www.dhlottery.co.kr/" target="_blank" rel="noopener noreferrer" class="btn btn-info btn-lg">
                                <i class="bi bi-link-45deg me-2"></i> ë™í–‰ë³µê¶Œ í™ˆí˜ì´ì§€ ë°”ë¡œê°€ê¸°
                            </a>
                            <p class="text-muted small mt-2">ë¡œë˜ êµ¬ë§¤ ë° ë‹¹ì²¨ ê²°ê³¼ í™•ì¸ì€ ë™í–‰ë³µê¶Œ ê³µì‹ í™ˆí˜ì´ì§€ë¥¼ ì´ìš©í•´ì£¼ì„¸ìš”.</p>
                        </div>
                        <hr class="my-6">

                        <!-- ìŠ¤ë§ˆíŠ¸ ë¶„ì„ í•„í„° ì„¹ì…˜ (ì•„ì½”ë””ì–¸ìœ¼ë¡œ ì ‘ê¸°/í´ê¸°) -->
                        <div class="accordion" id="smartFilterAccordion">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingSmartFilters">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSmartFilters" aria-expanded="false" aria-controls="collapseSmartFilters">
                                        <h6 class="text-xl font-bold mb-0">âš™ï¸ ìŠ¤ë§ˆíŠ¸ ë¶„ì„ í•„í„° (ìƒì„¸ ì„¤ì •)</h6>
                                    </button>
                                </h2>
                                <div id="collapseSmartFilters" class="accordion-collapse collapse" aria-labelledby="headingSmartFilters" data-bs-parent="#smartFilterAccordion">
                                    <div class="accordion-body text-start">
                                        <p class="text-muted mb-4">í†µê³„ì  ê²½í–¥ì„ ì ìš©í•˜ì—¬, ë‚˜ë§Œì˜ í–‰ìš´ ë²ˆí˜¸ë¥¼ ë”ìš± ì •êµí•˜ê²Œ ë§Œë“¤ì–´ë³´ì„¸ìš”. **'ë¹ ë¥¸ ë²ˆí˜¸ ìƒì„±'ê³¼ëŠ” ë³„ê°œì˜ ì„¤ì •ì…ë‹ˆë‹¤.**</p>
                                        <div class="row g-3 mb-4">
                                            <div class="col-md-6">
                                                <label class="form-label font-medium text-gray-700">í¬í•¨í•  ë²ˆí˜¸ (ê³ ì •ìˆ˜)</label>
                                                <div id="include-numbers-container" class="number-input-grid grid grid-cols-6 gap-2"></div>
                                                <small class="text-muted mt-1">ìµœëŒ€ 5ê°œê¹Œì§€ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</small>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label font-medium text-gray-700">ì œì™¸í•  ë²ˆí˜¸</label>
                                                <div id="exclude-numbers-container" class="number-input-grid grid grid-cols-6 gap-2"></div>
                                            </div>
                                        </div>

                                        <div class="space-y-3 mb-4">
                                            <div class="d-flex align-items-center justify-content-between bg-stone-50 p-3 rounded-lg">
                                                <label for="filter-odd-even" class="font-medium text-gray-700 flex-grow-1">
                                                    <span>í™€/ì§ ë¹„ìœ¨ <span class="text-xs text-gray-500">(í™€ìˆ˜:ì§ìˆ˜)</span></span>
                                                </label>
                                                <select id="filter-odd-even" class="form-select w-auto">
                                                    <option value="any">ìƒê´€ì—†ìŒ</option>
                                                    <option value="3:3">3:3</option>
                                                    <option value="4:2">4:2 ë˜ëŠ” 2:4</option>
                                                    <option value="5:1">5:1 ë˜ëŠ” 1:5</option>
                                                </select>
                                            </div>
                                            <div class="d-flex align-items-center justify-content-between bg-stone-50 p-3 rounded-lg">
                                                <label for="filter-high-low" class="font-medium text-gray-700 flex-grow-1">
                                                    <span>ê³ /ì € ë¹„ìœ¨ <span class="text-xs text-gray-500">(ì €:1-22, ê³ :23-45)</span></span>
                                                </label>
                                                <select id="filter-high-low" class="form-select w-auto">
                                                    <option value="any">ìƒê´€ì—†ìŒ</option>
                                                    <option value="3:3">3:3</option>
                                                    <option value="4:2">4:2 ë˜ëŠ” 2:4</option>
                                                    <option value="5:1">5:1 ë˜ëŠ” 1:5</option>
                                                </select>
                                            </div>
                                            <div class="d-flex align-items-center justify-content-between bg-stone-50 p-3 rounded-lg">
                                                <label for="filter-consecutive" class="font-medium text-gray-700 flex-grow-1">
                                                    <span>ì—°ì† ë²ˆí˜¸ <span class="text-xs text-gray-500">(ì˜ˆ: 1-2, 10-11)</span></span>
                                                </label>
                                                <select id="filter-consecutive" class="form-select w-auto">
                                                    <option value="any">ìƒê´€ì—†ìŒ</option>
                                                    <option value="0">0ìŒ</option>
                                                    <option value="1">1ìŒ</option>
                                                    <option value="2">2ìŒ ì´ìƒ</option>
                                                </select>
                                            </div>
                                            <div class="d-flex align-items-center justify-content-between bg-stone-50 p-3 rounded-lg">
                                                <label for="filter-end-digit-variety" class="font-medium text-gray-700 flex-grow-1">
                                                    <span>ëìˆ˜ ë‹¤ì–‘ì„± <span class="text-xs text-gray-500">(ì¤‘ë³µ ëìˆ˜ ë°©ì§€)</span></span>
                                                </label>
                                                <select id="filter-end-digit-variety" class="form-select w-auto">
                                                    <option value="any">ìƒê´€ì—†ìŒ</option>
                                                    <option value="4">ìµœì†Œ 4ê°œ</option>
                                                    <option value="5">ìµœì†Œ 5ê°œ</option>
                                                    <option value="6">ìµœì†Œ 6ê°œ</option>
                                                </select>
                                            </div>
                                            <div class="d-flex align-items-center justify-content-between bg-stone-50 p-3 rounded-lg">
                                                <label for="filter-prime-count" class="font-medium text-gray-700 flex-grow-1">
                                                    <span>ì†Œìˆ˜ í¬í•¨ ê°œìˆ˜ <span class="text-xs text-gray-500">(2,3,5,7,...)</span></span>
                                                </label>
                                                <select id="filter-prime-count" class="form-select w-auto">
                                                    <option value="any">ìƒê´€ì—†ìŒ</option>
                                                    <option value="0-1">0-1ê°œ</option>
                                                    <option value="2-3">2-3ê°œ</option>
                                                    <option value="4+">4ê°œ ì´ìƒ</option>
                                                </select>
                                            </div>
                                            <div class="d-flex align-items-center justify-content-between bg-stone-50 p-3 rounded-lg">
                                                <label for="filter-sum" class="font-medium text-gray-700">ë²ˆí˜¸ ì´í•© ë²”ìœ„</label>
                                                <div class="d-flex align-items-center gap-2">
                                                    <input type="number" id="sum-min" value="100" class="form-control w-20 text-center">
                                                    <span>~</span>
                                                    <input type="number" id="sum-max" value="170" class="form-control w-20 text-center">
                                                </div>
                                            </div>
                                        </div>

                                        <div class="d-grid gap-2 d-md-flex justify-content-md-center mt-4">
                                            <button id="reset-filters-btn" class="btn btn-outline-secondary btn-lg"><i class="bi bi-arrow-counterclockwise"></i> í•„í„° ì´ˆê¸°í™”</button>
                                            <button id="filter-generate-btn" class="btn btn-primary btn-lg"><i class="bi bi-magic"></i> í•„í„° ì ìš©í•˜ì—¬ ìƒì„±í•˜ê¸°</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ì´ë‹ˆì…œ ì…ë ¥ í•„ë“œ ë° ì „ì²´ ì´ˆê¸°í™” ë²„íŠ¼ì€ ëª¨ë“  ë²ˆí˜¸ ìƒì„± ë°©ì‹ì— ê³µí†µ ì ìš© -->
                <div class="row justify-content-center mt-2 mb-3">
                    <div class="col-md-4">
                        <div class="input-group">
                            <span class="input-group-text bg-white border-end-0">
                                <i class="bi bi-person text-primary"></i>
                            </span>
                            <input type="text" id="userInitial" class="form-control border-start-0"
                                   placeholder="ì•„ì´ë”” ì…ë ¥" maxlength="10">
                        </div>
                        <small class="small text-muted mt-3">ğŸ’¡ ì•„ì´ë”” ì…ë ¥í•˜ë©´ ë‚´ë²ˆí˜¸ ê²€ìƒ‰ ê°€ëŠ¥</small>
                    </div>
                    <div class="col-md-4 d-flex justify-content-center align-items-end">
                        <button id="reset-all-options-btn" class="btn btn-danger btn-lg w-full mt-3 mt-md-0"><i class="bi bi-trash"></i> ì „ì²´ ì´ˆê¸°í™”</button>
                    </div>
                </div>

                <div class="card shadow-sm mb-4">
                    <div class="card-body">
                        <div class="d-flex align-items-center justify-content-between mb-3">
                            <h5 class="card-title mb-0">
                                <i class="bi bi-clock-history"></i> ìµœê·¼ ìƒì„± ë²ˆí˜¸
                            </h5>
                            <div class="btn-group" role="group">
                                <button class="btn btn-sm btn-outline-primary" onclick="imageExport.downloadImage()" title="ì´ë¯¸ì§€ë¡œ ì €ì¥">
                                    <i class="bi bi-download"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-success" onclick="imageExport.shareImage()" title="ì´ë¯¸ì§€ ê³µìœ ">
                                    <i class="bi bi-share"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-danger" onclick="storage.clearHistory(); location.reload();" title="íˆìŠ¤í† ë¦¬ ì´ˆê¸°í™”">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div id="numberHistory" class="number-history">
                            <div class="text-center text-muted py-3">
                                <i class="bi bi-info-circle"></i> ë²ˆí˜¸ë¥¼ ìƒì„±í•˜ë©´ íˆìŠ¤í† ë¦¬ê°€ í‘œì‹œë©ë‹ˆë‹¤
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card shadow-sm mb-4">
                    <div class="card-body">
                        <div class="d-flex align-items-center justify-content-between mb-3">
                            <h5 class="card-title mb-0">
                                <i class="bi bi-globe"></i> ì‹¤ì‹œê°„ ë²ˆí˜¸ ìƒì„± ë¡œê·¸
                            </h5>
                            <button class="btn btn-sm btn-outline-primary" onclick="refreshPublicLog()">
                                <i class="bi bi-arrow-clockwise"></i> ìƒˆë¡œê³ ì¹¨
                            </button>
                        </div>
                        <div id="publicLog" class="public-log">
                            <div class="text-center text-muted py-3">
                                <i class="bi bi-clock"></i> ë¡œë”© ì¤‘...
                            </div>
                        </div>
                        <div class="text-center mt-3">
                            <small class="text-muted">* ìµœê·¼ 20ê°œì˜ ë²ˆí˜¸ ìƒì„± ê¸°ë¡ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ í‘œì‹œ (ë”ë¯¸ ë°ì´í„°)</small>
                        </div>
                    </div>
                </div>

                <div class="card shadow-sm mb-4">
                    <div class="card-body">
                        <h5 class="card-title mb-3">
                            <i class="bi bi-search"></i> ë‚´ ë²ˆí˜¸ ê²€ìƒ‰
                        </h5>
                        <div class="row">
                            <div class="col-md-6 mx-auto">
                                <div class="input-group mb-3">
                                    <span class="input-group-text bg-white border-end-0">
                                        <i class="bi bi-person-search text-primary"></i>
                                    </span>
                                    <input type="text" id="searchInitial" class="form-control border-start-0" placeholder="ì•„ì´ë”” ì…ë ¥" maxlength="10">
                                    <button class="btn btn-primary" onclick="searchUserNumbers()">
                                        <i class="bi bi-search"></i> ê²€ìƒ‰
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div id="searchResults" class="search-results">
                            <div class="text-center text-muted py-3">
                                <i class="bi bi-info-circle"></i> ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ê³  ê²€ìƒ‰í•´ë³´ì„¸ìš”
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card shadow-sm mb-5">
                    <div class="card-body">
                        <h5 class="card-title">
                            <i class="bi bi-trophy"></i> ì´ë²ˆ ì£¼ ë‹¹ì²¨ ë²ˆí˜¸
                        </h5>
                        <div id="currentLottoInfo" class="text-center">
                            <div class="loading-spinner"></div>
                        </div>
                    </div>
                </div>

                <div class="col-12">
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title">
                                <i class="bi bi-trophy-fill"></i> ëª…ì˜ˆì˜ ì „ë‹¹
                            </h5>
                            <div class="alert alert-info mb-3">
                                <small>
                                    <i class="bi bi-info-circle"></i>
                                    <strong>ëª…ì˜ˆì˜ ì „ë‹¹ì´ë€?</strong><br>
                                    í•œ ì£¼ ë™ì•ˆ ì‚¬ì´íŠ¸ì—ì„œ ìƒì„±í•œ ë²ˆí˜¸ ì¤‘ ì‹¤ì œ ë‹¹ì²¨ë²ˆí˜¸ì™€ ì¼ì¹˜í•˜ì—¬ ë‹¹ì²¨ëœ í–‰ìš´ì˜ ë²ˆí˜¸ë“¤ì„ ëª¨ì•„ë†“ì€ ê³³ì…ë‹ˆë‹¤! ğŸ‰<br>
                                    ë§¤ì£¼ í† ìš”ì¼ ì¶”ì²¨ í›„ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì–´ ì´ë²ˆ ì£¼ ë‹¹ì²¨ìë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                                </small>
                            </div>
                            <div id="weeklyRankStats" class="mb-4">
                                <div class="text-center text-muted py-3">
                                    <i class="bi bi-bar-chart"></i> ë“±ê¸‰ë³„ ë‹¹ì²¨ í˜„í™© ë¡œë”© ì¤‘... (ë”ë¯¸ ë°ì´í„°)
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-2 col-12">
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title">
                                <i class="bi bi-calendar-week"></i> ì´ë²ˆ ì£¼ ì¶”ì²¨ í†µê³„
                            </h5>
                            <div class="alert alert-info mb-4">
                                <div class="row align-items-center">
                                    <div class="col-md-8">
                                        <small>
                                            <i class="bi bi-info-circle"></i>
                                            <strong>ì´ë²ˆ ì£¼ ì¶”ì²¨ í†µê³„ë€?</strong><br>
                                            ë‹¤ê°€ì˜¬ ì¶”ì²¨ì„ ìœ„í•´ ì´ë²ˆ ì£¼ ë™ì•ˆ ì´ ì‚¬ì´íŠ¸ì—ì„œ ìƒì„±ëœ ë²ˆí˜¸ë“¤ì˜ í˜„í™©ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.<br>
                                            ì´ ë°ì´í„°ëŠ” ì‹¤ì œ ì¶”ì²¨ ê²°ê³¼ì™€ëŠ” ë¬´ê´€í•˜ë©°, ìˆœìˆ˜í•˜ê²Œ ì‚¬ì´íŠ¸ ì´ìš©ìë“¤ì´ ì„ íƒí•œ ë²ˆí˜¸ íŒ¨í„´ì„ ë¶„ì„í•œ í†µê³„ì…ë‹ˆë‹¤.
                                        </small>
                                    </div>
                                </div>
                            </div>
                            <div id="upcomingDrawStats">
                                <div class="text-center text-muted py-5">
                                    <div class="spinner-border text-primary mb-3" role="status">
                                        <span class="visually-hidden">Loading...</span>
                                    </div>
                                    <div>
                                        <i class="bi bi-calendar-event"></i> ì´ë²ˆ ì£¼ ì¶”ì²¨ í†µê³„ ë¡œë”© ì¤‘... (ë”ë¯¸ ë°ì´í„°)
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <footer class="mt-10 bg-white p-6 rounded-2xl shadow-lg">
                    <h2 class="text-2xl font-bold mb-4 text-center">ë²ˆí˜¸ë³„ ì¶œí˜„ ë¹ˆë„ (ìƒ˜í”Œ ë°ì´í„°)</h2>
                    <p class="text-center text-gray-500 mb-4">
                        ìµœê·¼ 100íšŒì°¨ ìƒ˜í”Œ ë°ì´í„° ê¸°ë°˜ì˜ ë²ˆí˜¸ë³„ ì¶œí˜„ íšŸìˆ˜ì…ë‹ˆë‹¤.
                        <strong class="text-red-500">'í•«'í•œ ë²ˆí˜¸</strong>ëŠ” ìì£¼ ë“±ì¥í•œ ë²ˆí˜¸,
                        <strong class="text-blue-500">'ì½œë“œ'í•œ ë²ˆí˜¸</strong>ëŠ” ì ê²Œ ë“±ì¥í•œ ë²ˆí˜¸ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.
                        ì´ ë°ì´í„°ëŠ” ì¬ë¯¸ë¡œ ì°¸ê³ í•´ì£¼ì„¸ìš”.
                    </p>
                    <div class="chart-container h-[500px] md:h-[400px]">
                        <canvas id="frequencyChart"></canvas>
                    </div>
                     <!-- Gambling Warning Message -->
                    <div class="gambling-warning">
                        <i class="bi bi-exclamation-triangle-fill"></i>
                        <div>
                            <strong>ê²½ê³ : ë¡œë˜ëŠ” ì‚¬í–‰ì„±ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.</strong><br>
                            ì§€ë‚˜ì¹œ ëª°ì…ì€ ì¼ìƒìƒí™œì— ì§€ì¥ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¬ë¯¸ë¡œ ì¦ê¸°ì‹œê³ , ë³¸ì¸ì˜ ê°ë‹¹í•  ìˆ˜ ìˆëŠ” ë²”ìœ„ ë‚´ì—ì„œë§Œ ì°¸ì—¬í•´ì£¼ì„¸ìš”.
                        </div>
                    </div>
                </footer>
            </div>
        </div>

        <!-- Right 3D Container for Lotto Visualisation -->
        <div id="right-3d-container" class="side-3d-container bg-blue-50 d-none d-lg-flex justify-content-center align-items-center">
            <canvas id="lottoVizCanvas"></canvas>
        </div>
    </main>

    <section class="bg-light py-5">
        <div class="container">
            <div class="row g-4">
                <div class="col-12">
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title" id="gameGuide">
                                <i class="bi bi-info-circle"></i> ë¡œë˜ ê²Œì„ ê°€ì´ë“œ
                            </h5>
                            <div class="row g-4">
                                <div class="col-md-6">
                                    <h6 class="fw-bold"><i class="bi bi-check2-circle"></i> ê²Œì„ ë°©ë²•</h6>
                                    <p>1ë¶€í„° 45ê¹Œì§€ì˜ ìˆ«ì ì¤‘ 6ê°œë¥¼ ì„ íƒí•˜ì—¬ ë§¤ì£¼ í† ìš”ì¼ ì¶”ì²¨ë˜ëŠ” ë²ˆí˜¸ì™€ ì¼ì¹˜í•˜ëŠ” ê°œìˆ˜ì— ë”°ë¼ ìƒê¸ˆì´ ê²°ì •ë©ë‹ˆë‹¤.</p>
                                </div>
                                <div class="col-md-6">
                                    <h6 class="fw-bold"><i class="bi bi-trophy"></i> ë‹¹ì²¨ êµ¬ì¡°</h6>
                                    <ul class="list-unstyled">
                                        <li><i class="bi bi-check2"></i> 1ë“±: 6ê°œ ë²ˆí˜¸ ì¼ì¹˜</li>
                                        <li><i class="bi bi-check2"></i> 2ë“±: 5ê°œ ë²ˆí˜¸ + ë³´ë„ˆìŠ¤ ë²ˆí˜¸ ì¼ì¹˜</li>
                                        <li><i class="bi bi-check2"></i> 3ë“±: 5ê°œ ë²ˆí˜¸ ì¼ì¹˜</li>
                                        <li><i class="bi bi-check2"></i> 4ë“±: 4ê°œ ë²ˆí˜¸ ì¼ì¹˜</li>
                                        <li><i class="bi bi-check2"></i> 5ë“±: 3ê°œ ë²ˆí˜¸ ì¼ì¹˜</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="card shadow-sm h-100">
                        <div class="card-body">
                            <h5 class="card-title" id="prizeInfo">
                                <i class="bi bi-cash-coin"></i> ë‹¹ì²¨ê¸ˆ ìˆ˜ë ¹ ì•ˆë‚´
                            </h5>
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>ë‹¹ì²¨ê¸ˆì•¡</th>
                                            <th>ìˆ˜ë ¹ì¥ì†Œ</th>
                                            <th>í•„ìš”ì„œë¥˜</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>5ë§Œì› ì´í•˜</td>
                                            <td>ë¡œë˜ íŒë§¤ì </td>
                                            <td>ë‹¹ì²¨ë³µê¶Œ</td>
                                        </tr>
                                        <tr>
                                            <td>5ë§Œì› ì´ˆê³¼ ~ 1ì–µì› ë¯¸ë§Œ</td>
                                            <td>ë†í˜‘ì€í–‰ ì§€ì </td>
                                            <td>ì‹ ë¶„ì¦, ë‹¹ì²¨ë³µê¶Œ</td>
                                        </tr>
                                        <tr>
                                            <td>1ì–µì› ì´ìƒ</td>
                                            <td>ë™í–‰ë³µê¶Œ ë³¸ì‚¬</td>
                                            <td>ì‹ ë¶„ì¦, ë‹¹ì²¨ë³µê¶Œ, ì¸ê°ì¦ëª…ì„œ</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="card shadow-sm h-100">
                        <div class="card-body">
                            <h5 class="card-title" id="statistics">
                                <i class="bi bi-graph-up"></i> ë¡œë˜ í†µê³„ ì •ë³´
                            </h5>
                            <div class="row g-3" id="statsContent">
                                <div class="col-6">
                                    <h6 class="fw-bold">ì¸ê¸° ë²ˆí˜¸ TOP 5</h6>
                                    <div class="d-flex flex-wrap gap-2" id="topNumbers">
                                        <span class="badge bg-secondary">ë¡œë”©ì¤‘...</span>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <h6 class="fw-bold">ë¹„ì¸ê¸° ë²ˆí˜¸ TOP 5</h6>
                                    <div class="d-flex flex-wrap gap-2" id="bottomNumbers">
                                        <span class="badge bg-secondary">ë¡œë”©ì¤‘...</span>
                                    </div>
                                </div>
                            </div>
                            <div id="bestMatchSection"></div>
                            <div class="alert alert-info mt-3 mb-0">
                                <small id="statsInfo">* í†µê³„ëŠ” ì°¸ê³ ìš©ì´ë©°, ë‹¹ì²¨ê³¼ëŠ” ë¬´ê´€í•©ë‹ˆë‹¤.</small>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-12">
                    <div class="card shadow-sm mb-4">
                        <div class="card-body">
                            <h5 class="card-title" id="faqTitle">
                                <i class="bi bi-question-circle"></i> ìì£¼ ë¬»ëŠ” ì§ˆë¬¸
                            </h4>
                            <div class="input-group mb-2">
                                <span class="input-group-text bg-white border-end-0">
                                    <i class="bi bi-search text-primary"></i>
                                </span>
                                <input type="text" class="form-control border-start-0" id="faqSearch" placeholder="ê¶ê¸ˆí•œ ë‚´ìš©ì„ ê²€ìƒ‰í•´ë³´ì„¸ìš”">
                            </div>
                            <small class="text-muted d-block mb-3">
                                ğŸ’¡ ì˜ˆì‹œ ì§ˆë¬¸ì„ í´ë¦­í•˜ê±°ë‚˜ ì§ì ‘ ì§ˆë¬¸ì„ ì…ë ¥í•´ë³´ì„¸ìš”!
                            </small>
                            <div id="faqExamples" class="d-flex flex-wrap justify-content-center gap-2 mb-4">
                                <!-- FAQ examples will be inserted here by JavaScript -->
                            </div>
                            <div id="faqAnswerDisplay" class="mt-3 p-3 bg-light rounded shadow-sm text-start">
                                <p class="text-muted text-center"><i class="bi bi-info-circle"></i> ì§ˆë¬¸ì„ ì…ë ¥í•˜ì‹œë©´ ë‹µë³€ì´ í‘œì‹œë©ë‹ˆë‹¤.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="related-content-section py-5">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="text-white mb-3">
                    <i class="bi bi-lightbulb"></i> ë¡œë˜ ë‹¹ì²¨ í™•ë¥ ì„ ë†’ì´ëŠ” ê³¼í•™ì  ë¶„ì„
                </h2>
                <p class="lead text-white">ë°ì´í„° ê¸°ë°˜ ë¡œë˜ ë²ˆí˜¸ ì„ íƒ ì „ëµê³¼ ë‹¹ì²¨ íŒ¨í„´ ë¶„ì„</p>
            </div>

            <div class="row g-4">
                <div class="col-lg-6">
                    <div class="insight-card">
                        <h4 class="text-primary mb-3">
                            <i class="bi bi-calculator"></i> ë¡œë˜ ë‹¹ì²¨ í™•ë¥ ì˜ ê³¼í•™ì  ë¶„ì„
                        </h4>
                        <p class="mb-3">ë¡œë˜ 1ë“± ë‹¹ì²¨ í™•ë¥ ì€ <strong>1/8,145,060</strong>ë¡œ ë§¤ìš° ë‚®ì§€ë§Œ, í†µê³„ì  íŒ¨í„´ì„ ë¶„ì„í•˜ë©´ í¥ë¯¸ë¡œìš´ ì‚¬ì‹¤ë“¤ì„ ë°œê²¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                        <div class="row g-3 mb-3">
                            <div class="col-6">
                                <div class="bg-light p-3 rounded text-center">
                                    <h5 class="text-primary mb-1">22%</h5>
                                    <small>ì—°ì† ë²ˆí˜¸ ì¶œí˜„ìœ¨</small>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="bg-light p-3 rounded text-center">
                                    <h5 class="text-primary mb-1">70%</h5>
                                    <small>3í™€ 3ì§ ë˜ëŠ” 4í™€ 2ì§</small>
                                </div>
                            </div>
                        </div>
                        <p class="mb-0 text-sm">ì‹¤ì œ ë‹¹ì²¨ í™•ë¥ ì—ëŠ” ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šì§€ë§Œ, í†µê³„ì ìœ¼ë¡œ ìì£¼ ë‚˜íƒ€ë‚˜ëŠ” íŒ¨í„´ì„ ì´í•´í•˜ëŠ” ê²ƒì€ ë²ˆí˜¸ ì„ íƒì˜ ì¬ë¯¸ë¥¼ ë”í•©ë‹ˆë‹¤.</p>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="insight-card">
                        <h4 class="text-primary mb-3">
                            <i class="bi bi-graph-up-arrow"></i> í•«&ì½œë“œ ë²ˆí˜¸ì™€ ë¹ˆë„ ë¶„ì„
                        </h4>
                        <p class="mb-3">ê³¼ê±° ë‹¹ì²¨ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ íŠ¹ì • ë²ˆí˜¸ë“¤ì´ ë‹¤ë¥¸ ë²ˆí˜¸ë“¤ë³´ë‹¤ ë” ìì£¼ ë˜ëŠ” ëœ ìì£¼ ì¶œí˜„í•˜ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤.</p>
                        <ul class="list-unstyled text-sm mb-3">
                            <li><i class="bi bi-fire text-danger"></i> <strong>í•« ë²ˆí˜¸:</strong> ìµœê·¼ ë§ì´ ë‚˜ì˜¨ ë²ˆí˜¸ë“¤. ì¼ë¶€ëŠ” ì´ ë²ˆí˜¸ë“¤ì´ 'ìš´ì´ ì¢‹ë‹¤'ê³  ë¯¿ìŠµë‹ˆë‹¤.</li>
                            <li><i class="bi bi-snow2 text-info"></i> <strong>ì½œë“œ ë²ˆí˜¸:</strong> ì˜¤ë«ë™ì•ˆ ë‚˜ì˜¤ì§€ ì•Šì€ ë²ˆí˜¸ë“¤. 'ì´ì œ ë‚˜ì˜¬ ë•Œê°€ ë˜ì—ˆë‹¤'ê³  ì˜ˆìƒí•˜ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤.</li>
                        </ul>
                        <p class="mb-0 text-sm">ì´ëŸ¬í•œ í†µê³„ëŠ” ë‹¹ì²¨ì„ ë³´ì¥í•˜ì§€ ì•Šì§€ë§Œ, ë²ˆí˜¸ë¥¼ ì„ íƒí•˜ëŠ” í¥ë¯¸ë¡œìš´ ë°©ë²• ì¤‘ í•˜ë‚˜ë¡œ í™œìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Custom Message Box -->
    <div id="message-modal-overlay" class="modal-overlay">
        <div class="modal-content">
            <p id="message-modal-text" class="text-lg font-medium text-gray-800"></p>
            <button id="message-modal-close-btn">í™•ì¸</button>
        </div>
    </div>

    <!-- AI Analysis Modal -->
    <div id="ai-analysis-modal-overlay" class="modal-overlay">
        <div class="modal-content" id="ai-analysis-modal-content">
            <h5 class="card-title mb-3"><i class="bi bi-robot me-2"></i>âœ¨ AI ë²ˆí˜¸ ë¶„ì„</h5>
            <div id="ai-analysis-loading" class="mb-3">
                <div class="loading-spinner me-2"></div> AIê°€ ë²ˆí˜¸ë¥¼ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...
            </div>
            <p id="ai-analysis-text" class="text-lg font-medium text-gray-800"></p>
            <button id="ai-analysis-modal-close-btn">ë‹«ê¸°</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const quickGenerateBtn = document.getElementById('quick-generate-btn');
            const filterGenerateBtn = document.getElementById('filter-generate-btn');
            const resetFiltersBtn = document.getElementById('reset-filters-btn');
            const resetAllOptionsBtn = document.getElementById('reset-all-options-btn');
            const copyGeneratedBtn = document.getElementById('copy-generated-btn');
            const analyzeNumbersBtn = document.getElementById('analyze-numbers-btn'); // AI ë¶„ì„ ë²„íŠ¼
            const lottoNumbersDiv = document.getElementById('lottoNumbers');
            const copyStatusDiv = document.getElementById('copy-status');
            const userInitialInput = document.getElementById('userInitial');
            const searchInitialInput = document.getElementById('searchInitial');
            const searchResultsDiv = document.getElementById('searchResults');
            const numberHistoryDiv = document.getElementById('numberHistory');
            const publicLogDiv = document.getElementById('publicLog');
            const currentLottoInfoDiv = document.getElementById('currentLottoInfo');
            const weeklyRankStatsDiv = document.getElementById('weeklyRankStats');
            const upcomingDrawStatsDiv = document.getElementById('upcomingDrawStats');
            const topNumbersDiv = document.getElementById('topNumbers');
            const bottomNumbersDiv = document.getElementById('bottomNumbers');
            const faqSearchInput = document.getElementById('faqSearch');
            const faqAnswerDisplay = document.getElementById('faqAnswerDisplay'); // FAQ ë‹µë³€ í‘œì‹œ ì˜ì—­
            const faqExamplesDiv = document.getElementById('faqExamples'); // FAQ ì˜ˆì‹œ ì§ˆë¬¸ í‘œì‹œ ì˜ì—­

            const quickNumSetsSelect = document.getElementById('quick-num-sets');

            const includeContainer = document.getElementById('include-numbers-container');
            const excludeContainer = document.getElementById('exclude-numbers-container');

            const messageModalOverlay = document.getElementById('message-modal-overlay');
            const messageModalText = document.getElementById('message-modal-text');
            const messageModalCloseBtn = document.getElementById('message-modal-close-btn');

            // AI Analysis Modal elements
            const aiAnalysisModalOverlay = document.getElementById('ai-analysis-modal-overlay');
            const aiAnalysisLoading = document.getElementById('ai-analysis-loading');
            const aiAnalysisText = document.getElementById('ai-analysis-text');
            const aiAnalysisModalCloseBtn = document.getElementById('ai-analysis-modal-close-btn');

            let latestGeneratedNumbers = []; // Store the most recently generated numbers

            // FAQ ë°ì´í„°
            const faqData = [
                {
                    question: "ë¡œë˜ 6/45ëŠ” ì–´ë–¤ ê²Œì„ì¸ê°€ìš”?",
                    answer: "1ë¶€í„° 45ê¹Œì§€ì˜ ìˆ«ì ì¤‘ 6ê°œë¥¼ ë§íˆëŠ” ê²Œì„ìœ¼ë¡œ, ë§¤ì£¼ í† ìš”ì¼ ì¶”ì²¨ì„ í†µí•´ ë‹¹ì²¨ ë²ˆí˜¸ê°€ ê²°ì •ë©ë‹ˆë‹¤. 6ê°œ ìˆ«ìê°€ ëª¨ë‘ ì¼ì¹˜í•˜ë©´ 1ë“± ë‹¹ì²¨ì…ë‹ˆë‹¤."
                },
                {
                    question: "ë¡œë˜ëŠ” ì–´ë””ì„œ êµ¬ë§¤í•  ìˆ˜ ìˆë‚˜ìš”?",
                    answer: "ì „êµ­ì˜ ë¡œë˜ íŒë§¤ì (ë³µê¶Œë°©)ê³¼ ë™í–‰ë³µê¶Œ ê³µì‹ í™ˆí˜ì´ì§€ì—ì„œ ì˜¨ë¼ì¸ìœ¼ë¡œ êµ¬ë§¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
                },
                {
                    question: "ë¡œë˜ ë‹¹ì²¨ê¸ˆì€ ì–´ë–»ê²Œ ìˆ˜ë ¹í•˜ë‚˜ìš”?",
                    answer: "ë‹¹ì²¨ê¸ˆì•¡ì— ë”°ë¼ ìˆ˜ë ¹ ì¥ì†Œê°€ ë‹¤ë¦…ë‹ˆë‹¤. 5ë§Œì› ì´í•˜ëŠ” ë¡œë˜ íŒë§¤ì , 5ë§Œì› ì´ˆê³¼ 1ì–µì› ë¯¸ë§Œì€ ë†í˜‘ì€í–‰ ì§€ì , 1ì–µì› ì´ìƒì€ ë™í–‰ë³µê¶Œ ë³¸ì‚¬ì—ì„œ ìˆ˜ë ¹ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì‹ ë¶„ì¦ ë“± í•„ìš” ì„œë¥˜ë¥¼ ì§€ì°¸í•´ì•¼ í•©ë‹ˆë‹¤."
                },
                {
                    question: "1ë“± ë‹¹ì²¨ í™•ë¥ ì€ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?",
                    answer: "1ë“± ë‹¹ì²¨ í™•ë¥ ì€ 8,145,060ë¶„ì˜ 1ì…ë‹ˆë‹¤. ì´ í™•ë¥ ì€ ë§¤íšŒì°¨ ë™ì¼í•˜ê²Œ ì ìš©ë©ë‹ˆë‹¤."
                },
                {
                    question: "ë¡œë˜ ë‹¹ì²¨ê¸ˆì— ì„¸ê¸ˆì´ ë¶€ê³¼ë˜ë‚˜ìš”?",
                    answer: "ë„¤, ë‹¹ì²¨ê¸ˆì— ë”°ë¼ ì„¸ê¸ˆì´ ì›ì²œì§•ìˆ˜ë©ë‹ˆë‹¤. 3ì–µì› ì´í•˜ëŠ” 22%, 3ì–µì› ì´ˆê³¼ëŠ” 33%ì˜ ì„¸ê¸ˆì´ ë¶€ê³¼ë©ë‹ˆë‹¤."
                },
                {
                    question: "ë‹¹ì²¨ê¸ˆ ìˆ˜ë ¹ ê¸°í•œì´ ìˆë‚˜ìš”?",
                    answer: "ë„¤, ë‹¹ì²¨ê¸ˆì€ ì§€ê¸‰ê°œì‹œì¼ë¡œë¶€í„° 1ë…„ ì´ë‚´ì— ìˆ˜ë ¹í•´ì•¼ í•©ë‹ˆë‹¤. ê¸°í•œì´ ì§€ë‚˜ë©´ ë‹¹ì²¨ê¸ˆì€ ë³µê¶Œê¸°ê¸ˆìœ¼ë¡œ ê·€ì†ë©ë‹ˆë‹¤."
                },
                {
                    question: "ì´ ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°ëŠ” ë‹¹ì²¨ì„ ë³´ì¥í•˜ë‚˜ìš”?",
                    answer: "ì•„ë‹ˆìš”, ë¡œë˜ëŠ” ìˆœìˆ˜í•œ ìš´ì— ê¸°ë°˜í•œ ê²Œì„ì´ë©°, ì´ ìƒì„±ê¸°ëŠ” ë‹¹ì²¨ì„ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ë§Œ, í†µê³„ì  ë¶„ì„ì„ í†µí•´ ì¬ë¯¸ì™€ í¸ì˜ì„±ì„ ì œê³µí•˜ê³  ì‚¬ìš©ìê°€ ì„ í˜¸í•˜ëŠ” ì¡°í•©ì„ ë§Œë“œëŠ” ë° ë„ì›€ì„ ë“œë¦½ë‹ˆë‹¤."
                },
                {
                    question: "ë¡œë˜ êµ¬ë§¤ëŠ” ëª‡ ì‹œê¹Œì§€ ê°€ëŠ¥í•œê°€ìš”?",
                    answer: "ë¡œë˜ êµ¬ë§¤ëŠ” ì¶”ì²¨ì¼ì¸ í† ìš”ì¼ ì˜¤í›„ 8ì‹œê¹Œì§€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì´í›„ì—ëŠ” ë‹¤ìŒ íšŒì°¨ ë¡œë˜ êµ¬ë§¤ê°€ ì‹œì‘ë©ë‹ˆë‹¤."
                },
                {
                    question: "ë¡œë˜ ì¸í„°ë„· êµ¬ë§¤ë„ ê°€ëŠ¥í•œê°€ìš”?",
                    answer: "ë„¤, ë™í–‰ë³µê¶Œ ê³µì‹ í™ˆí˜ì´ì§€ì—ì„œ ì˜¨ë¼ì¸ìœ¼ë¡œë„ ë¡œë˜ë¥¼ êµ¬ë§¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¨, 1ì¸ë‹¹ 1íšŒì°¨ êµ¬ë§¤ í•œë„ëŠ” 5,000ì›ì…ë‹ˆë‹¤."
                },
                {
                    question: "ë¡œë˜ ë‹¹ì²¨ê¸ˆì€ ì–¸ì œ ì§€ê¸‰ë˜ë‚˜ìš”?",
                    answer: "ë¡œë˜ ë‹¹ì²¨ê¸ˆì€ ì¶”ì²¨ì¼ ë‹¤ìŒ ë‚ ë¶€í„° ì§€ê¸‰ì´ ê°œì‹œë©ë‹ˆë‹¤. (ì¼ìš”ì¼ë¶€í„° ì§€ê¸‰ ê°€ëŠ¥)"
                },
                {
                    question: "ë¡œë˜ êµ¬ë§¤ ì—°ë ¹ ì œí•œì´ ìˆë‚˜ìš”?",
                    answer: "ë„¤, ë§Œ 19ì„¸ ë¯¸ë§Œ ì²­ì†Œë…„ì€ ë¡œë˜ë¥¼ êµ¬ë§¤í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
                }
            ];


            /**
             * Displays a custom message in a modal.
             * @param {string} message - The message to display.
             */
            function showMessage(message) {
                messageModalText.textContent = message;
                messageModalOverlay.classList.add('show');
            }

            // Close message modal on button click
            messageModalCloseBtn.addEventListener('click', () => {
                messageModalOverlay.classList.remove('show');
            });
            // Close message modal when clicking outside the content area
            messageModalOverlay.addEventListener('click', (e) => {
                if (e.target === messageModalOverlay) {
                    messageModalOverlay.classList.remove('show');
                }
            });

            // Close AI analysis modal
            aiAnalysisModalCloseBtn.addEventListener('click', () => {
                aiAnalysisModalOverlay.classList.remove('show');
            });
            aiAnalysisModalOverlay.addEventListener('click', (e) => {
                if (e.target === aiAnalysisModalOverlay) {
                    aiAnalysisModalOverlay.classList.remove('show');
                }
            });

            /**
             * Creates a selectable grid of numbers (1-45) for include/exclude filters.
             * @param {HTMLElement} container - The DOM element to append the grid to.
             * @returns {Set<number>} - A Set containing currently selected numbers.
             */
            function createSelectableGrid(container) {
                container.innerHTML = ''; // Clear existing content
                const selectedNumbers = new Set();

                for (let i = 1; i <= 45; i++) {
                    const cell = document.createElement('div');
                    cell.textContent = i;
                    cell.className = 'w-9 h-9 flex items-center justify-center border border-gray-200 rounded-md cursor-pointer hover:bg-blue-100 transition';
                    cell.dataset.number = i; // Store number in dataset

                    cell.addEventListener('click', () => {
                        const num = parseInt(cell.dataset.number);
                        if (selectedNumbers.has(num)) {
                            selectedNumbers.delete(num);
                            cell.classList.remove('bg-blue-500', 'text-white', 'font-bold'); // Deselect styling
                        } else {
                            if (container.id === 'include-numbers-container' && selectedNumbers.size >= 5) {
                                showMessage('í¬í•¨í•  ë²ˆí˜¸ëŠ” ìµœëŒ€ 5ê°œê¹Œì§€ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
                                return;
                            }
                            selectedNumbers.add(num);
                            cell.classList.add('bg-blue-500', 'text-white', 'font-bold'); // Select styling
                        }
                    });
                    container.appendChild(cell);
                }
                return selectedNumbers;
            }

            // Initialize selectable grids for include and exclude numbers
            const selectedIncludeNumbers = createSelectableGrid(includeContainer);
            const selectedExcludeNumbers = createSelectableGrid(excludeContainer);

            /**
             * Determines the background color of a lotto ball based on its number.
             * @param {number} number - The lotto number.
             * @returns {string} - Tailwind CSS class for background color.
             */
            const getBallColor = (number) => {
                if (number <= 10) return 'bg-yellow-400'; // 1-10 yellow
                if (number <= 20) return 'bg-blue-500';   // 11-20 blue
                if (number <= 30) return 'bg-red-500';    // 21-30 red
                if (number <= 40) return 'bg-gray-600';   // 31-40 gray
                return 'bg-green-500';                    // 41-45 green
            };

            /**
             * Checks if a number is prime.
             * @param {number} num - The number to check.
             * @returns {boolean} - True if prime, false otherwise.
             */
            const isPrime = num => {
                if (num <= 1) return false;
                for (let i = 2; i * i <= num; i++) {
                    if (num % i === 0) return false;
                }
                return true;
            };

            /**
             * Checks for consecutive numbers in an array.
             * @param {number[]} arr - Sorted array of numbers.
             * @returns {number} - Count of consecutive pairs.
             */
            const checkConsecutive = (arr) => {
                let count = 0;
                for (let i = 0; i < arr.length - 1; i++) {
                    if (arr[i+1] === arr[i] + 1) {
                        count++;
                    }
                }
                return count;
            };

            /**
             * Calculates the variety of end digits in a combination.
             * @param {number[]} arr - Array of numbers.
             * @returns {number} - Number of unique end digits.
             */
            const checkEndDigitVariety = (arr) => {
                const endDigits = new Set(arr.map(n => n % 10));
                return endDigits.size;
            };

            /**
             * Generates lotto number combinations based on filters or quickly.
             * @param {boolean} isFiltered - True if smart filters should be applied.
             */
            const generateNumbers = (isFiltered = false) => {
                const numSets = parseInt(quickNumSetsSelect.value); // Get number of combinations from select
                const userInitial = userInitialInput.value.trim(); // Get user initial

                let includeNumbers = [];
                let excludeNumbers = [];
                let filterOddEven = 'any';
                let filterHighLow = 'any';
                let filterConsecutive = 'any';
                let filterEndDigitVariety = 'any';
                let filterPrimeCount = 'any';
                let sumMin = 0;
                let sumMax = 270; // Max sum of 6 numbers (45+44+43+42+41+40 = 255)

                // Apply filters if enabled
                if (isFiltered) {
                    includeNumbers = Array.from(selectedIncludeNumbers);
                    excludeNumbers = Array.from(selectedExcludeNumbers);
                    filterOddEven = document.getElementById('filter-odd-even').value;
                    filterHighLow = document.getElementById('filter-high-low').value;
                    filterConsecutive = document.getElementById('filter-consecutive').value;
                    filterEndDigitVariety = document.getElementById('filter-end-digit-variety').value;
                    filterPrimeCount = document.getElementById('filter-prime-count').value;
                    sumMin = parseInt(document.getElementById('sum-min').value) || 0;
                    sumMax = parseInt(document.getElementById('sum-max').value) || 270;

                    // Validate conflicting include/exclude numbers
                    const conflictingNumbers = includeNumbers.filter(num => excludeNumbers.includes(num));
                    if (conflictingNumbers.length > 0) {
                        showMessage(`í¬í•¨ ë²ˆí˜¸ì™€ ì œì™¸ ë²ˆí˜¸ì— ë™ì¼í•œ ìˆ«ì(${conflictingNumbers.join(', ')})ê°€ ìˆìŠµë‹ˆë‹¤.`);
                        return;
                    }
                    // Validate include numbers count
                    if (includeNumbers.length > 5) {
                        showMessage('í¬í•¨í•  ë²ˆí˜¸ëŠ” 5ê°œê¹Œì§€ë§Œ ì„ íƒ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
                        return;
                    }
                }

                lottoNumbersDiv.innerHTML = '<div class="loading-spinner"></div>'; // Show loading spinner
                latestGeneratedNumbers = []; // Reset latest generated numbers
                let generatedCount = 0;
                let attempt = 0;

                // Loop to generate required number of combinations
                while (generatedCount < numSets && attempt < 10000) { // Max 10000 attempts to prevent infinite loops
                    attempt++;
                    // Create a pool of available numbers (1-45 excluding included/excluded)
                    let pool = Array.from({ length: 45 }, (_, i) => i + 1)
                        .filter(n => !includeNumbers.includes(n) && !excludeNumbers.includes(n));

                    let combination = [...includeNumbers]; // Start with included numbers

                    // Add random numbers from the pool until 6 numbers are selected
                    while (combination.length < 6 && pool.length > 0) {
                        const randomIndex = Math.floor(Math.random() * pool.length);
                        const [randomNumber] = pool.splice(randomIndex, 1); // Remove from pool to avoid duplicates
                        combination.push(randomNumber);
                    }

                    combination.sort((a, b) => a - b); // Sort the combination

                    if (combination.length !== 6) continue; // Skip if not a valid 6-number combination

                    // Apply filters for smart generation
                    if (isFiltered) {
                        // Odd/Even filter
                        const oddCount = combination.filter(n => n % 2 !== 0).length;
                        const evenCount = 6 - oddCount;
                        if (filterOddEven !== 'any') {
                            const [o, e] = filterOddEven.split(':').map(Number);
                            if (!((oddCount === o && evenCount === e) || (oddCount === e && evenCount === o))) {
                                continue;
                            }
                        }

                        // High/Low filter (1-22 low, 23-45 high)
                        const highCount = combination.filter(n => n >= 23).length;
                        const lowCount = 6 - highCount;
                        if (filterHighLow !== 'any') {
                            const [h, l] = filterHighLow.split(':').map(Number);
                            if (!((highCount === h && lowCount === l) || (highCount === l && lowCount === h))) {
                                continue;
                            }
                        }

                        // Consecutive numbers filter
                        let consecutivePairs = checkConsecutive(combination);
                        if (filterConsecutive !== 'any') {
                            const requiredPairs = parseInt(filterConsecutive);
                            if (filterConsecutive === '2') {
                                if (consecutivePairs < 2) continue; // Check for at least 2 pairs
                            } else {
                                if (consecutivePairs !== requiredPairs) continue; // Check for exact number of pairs
                            }
                        }

                        // End digit variety filter
                        let uniqueEndDigits = checkEndDigitVariety(combination);
                        if (filterEndDigitVariety !== 'any') {
                            const minUnique = parseInt(filterEndDigitVariety);
                            if (uniqueEndDigits < minUnique) continue;
                        }

                        // Prime numbers count filter
                        const primesInCombination = combination.filter(isPrime).length;
                        if (filterPrimeCount !== 'any') {
                            if (filterPrimeCount === '0-1') {
                                if (primesInCombination < 0 || primesInCombination > 1) continue;
                            } else if (filterPrimeCount === '2-3') {
                                if (primesInCombination < 2 || primesInCombination > 3) continue;
                            } else if (filterPrimeCount === '4+') {
                                if (primesInCombination < 4) continue;
                            }
                        }

                        // Sum of numbers filter
                        const sum = combination.reduce((a, b) => a + b, 0);
                        if (sum < sumMin || sum > sumMax) {
                            continue;
                        }
                    }

                    latestGeneratedNumbers.push(combination); // Add valid combination to latest
                    generatedCount++;
                }

                lottoNumbersDiv.innerHTML = ''; // Clear loading spinner
                if (latestGeneratedNumbers.length === 0) {
                    lottoNumbersDiv.innerHTML = `<p class="text-danger text-center font-semibold">ì¡°ê±´ì— ë§ëŠ” ë²ˆí˜¸ë¥¼ ìƒì„±í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤. í•„í„° ì„¤ì •ì„ ë³€ê²½í•´ë³´ì„¸ìš”.</p>`;
                } else {
                    latestGeneratedNumbers.forEach(combo => displayLottoBalls(combo, lottoNumbersDiv, 'lotto-ball-preview'));
                    storage.saveHistory(latestGeneratedNumbers, userInitial); // Save to local storage
                    displayHistory(); // Update history display
                    refreshPublicLog(); // Update public log (simulated)
                }

                // Warn if not all requested combinations could be generated
                if (generatedCount < numSets) {
                    lottoNumbersDiv.innerHTML += `<p class="text-danger text-center font-semibold mt-3">ìš”ì²­í•œ ì¡°í•© ìˆ˜ë¥¼ ëª¨ë‘ ìƒì„±í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. (ìƒì„±ëœ ì¡°í•©: ${generatedCount}ê°œ)</p>`;
                }
            };

            /**
             * Displays a single lotto combination as styled balls.
             * @param {number[]} combination - An array of 6 lotto numbers.
             * @param {HTMLElement} container - The DOM element to append the balls to.
             * @param {string} ballClass - The CSS class for the individual lotto balls.
             */
            const displayLottoBalls = (combination, container, ballClass) => {
                const comboDiv = document.createElement('div');
                comboDiv.className = 'd-flex justify-content-center align-items-center mb-2'; // Center numbers horizontally
                combination.forEach((num, index) => {
                    const ball = document.createElement('div');
                    ball.className = `${ballClass} ${getBallColor(num)} mr-1`;
                    ball.textContent = num;
                    ball.style.animationDelay = `${index * 0.07}s`; // Stagger animation for individual balls
                    comboDiv.appendChild(ball);
                });
                container.appendChild(comboDiv);
            };

            /**
             * Calls the Gemini API to get an analysis of the generated lotto numbers.
             */
            const analyzeNumbersWithAI = async () => {
                if (latestGeneratedNumbers.length === 0) {
                    showMessage("ë¶„ì„í•  ë¡œë˜ ë²ˆí˜¸ê°€ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ë²ˆí˜¸ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.");
                    return;
                }

                // Show AI analysis modal
                aiAnalysisModalOverlay.classList.add('show');
                aiAnalysisLoading.classList.remove('d-none');
                aiAnalysisText.textContent = ''; // Clear previous analysis

                const numbersToAnalyze = latestGeneratedNumbers[0].join(', '); // Analyze the first combination for simplicity

                const prompt = `ë¡œë˜ ë²ˆí˜¸ [${numbersToAnalyze}]ì— ëŒ€í•´ ì¬ë¯¸ìˆê³  ê¸ì •ì ì¸ ë¶„ì„ì´ë‚˜ ì„¤ëª…ì„ ì œê³µí•´ì£¼ì„¸ìš”. í†µê³„ì ì¸ ìš©ì–´(ì˜ˆ: í™€ì§ ë¹„ìœ¨, ì—°ì† ë²ˆí˜¸, ê³ ì € ë¹„ìœ¨, ëìˆ˜ ë“±)ë¥¼ í™œìš©í•˜ê³ , ì´ ë²ˆí˜¸ ì¡°í•©ì´ í–‰ìš´ì„ ê°€ì ¸ë‹¤ì¤„ ê²ƒ ê°™ì€ ëŠë‚Œì„ ì£¼ëŠ” ë¬¸êµ¬ë¥¼ ë§ë¶™ì—¬ì£¼ì„¸ìš”. ì§§ê³  ê°„ê²°í•˜ê²Œ í•œë‘ ë¬¸ë‹¨ìœ¼ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.`;

                try {
                    const chatHistory = [];
                    chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                    const payload = { contents: chatHistory };
                    const apiKey = ""; // Canvas will automatically provide the API key
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    const result = await response.json();
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        aiAnalysisText.textContent = text;
                    } else {
                        aiAnalysisText.textContent = "AI ë¶„ì„ì„ ê°€ì ¸ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.";
                        console.error("Gemini API returned an unexpected structure:", result);
                    }
                } catch (error) {
                    aiAnalysisText.textContent = "AI ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í™•ì¸í•˜ê±°ë‚˜ ë‚˜ì¤‘ì— ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.";
                    console.error("Error calling Gemini API:", error);
                } finally {
                    aiAnalysisLoading.classList.add('d-none');
                }
            };

            /**
             * Resets all smart filter options to their default values.
             */
            const resetFilters = () => {
                selectedIncludeNumbers.clear();
                selectedExcludeNumbers.clear();
                // Remove styling from all cells in include/exclude containers
                document.querySelectorAll('#include-numbers-container div, #exclude-numbers-container div').forEach(cell => {
                    cell.classList.remove('bg-blue-500', 'text-white', 'font-bold');
                });
                document.getElementById('filter-odd-even').value = 'any';
                document.getElementById('filter-high-low').value = 'any';
                document.getElementById('filter-consecutive').value = 'any';
                document.getElementById('filter-end-digit-variety').value = 'any';
                document.getElementById('filter-prime-count').value = 'any';
                document.getElementById('sum-min').value = '100';
                document.getElementById('sum-max').value = '170';
            };

            /**
             * Resets all options on the page to their default states.
             */
            const resetAllOptions = () => {
                quickNumSetsSelect.value = '5'; // Reset combination count
                resetFilters(); // Reset smart filters
                lottoNumbersDiv.innerHTML = '<div class="loading-spinner"></div>'; // Clear generated numbers
                copyStatusDiv.textContent = ''; // Clear copy status message
                userInitialInput.value = ''; // Clear user initial input
                document.getElementById('searchInitial').value = ''; // Clear search input
                searchResultsDiv.innerHTML = `<div class="text-center text-muted py-3"><i class="bi bi-info-circle"></i> ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ê³  ê²€ìƒ‰í•´ë³´ì„¸ìš”</div>`; // Reset search results
                // storage.clearHistory(); // Uncomment if you want to clear history on full reset
                displayHistory(); // Refresh history display (might become empty)
                refreshPublicLog(); // Refresh public log (might be empty)
                latestGeneratedNumbers = []; // Clear latest generated numbers on full reset
                // Reset FAQ search
                faqSearchInput.value = '';
                filterFaqs(); // Display initial FAQ message
            };

            /**
             * Copies the generated lotto numbers to the clipboard.
             */
            const copyResults = () => {
                // Get all generated combinations displayed on the page
                const generatedCombos = Array.from(lottoNumbersDiv.querySelectorAll('.d-flex.justify-content-center'))
                    .map(div => Array.from(div.children).map(ball => ball.textContent).join(', '));

                if (generatedCombos.length === 0 || lottoNumbersDiv.querySelector('.loading-spinner')) {
                    copyStatusDiv.textContent = 'ìƒì„±ëœ ë²ˆí˜¸ê°€ ì—†ìŠµë‹ˆë‹¤.';
                    setTimeout(() => copyStatusDiv.textContent = '', 2000); // Clear message after 2 seconds
                    return;
                }

                const textToCopy = generatedCombos.join('\n'); // Format for copying
                const textArea = document.createElement('textarea');
                textArea.value = textToCopy;
                document.body.appendChild(textArea);
                textArea.select(); // Select text in textarea
                try {
                    document.execCommand('copy'); // Execute copy command
                    copyStatusDiv.textContent = 'ìƒì„±ëœ ë²ˆí˜¸ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!';
                } catch (err) {
                    copyStatusDiv.textContent = 'ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.';
                }
                document.body.removeChild(textArea); // Remove textarea
                setTimeout(() => copyStatusDiv.textContent = '', 2000); // Clear message after 2 seconds
            };

            /**
             * Manages saving and retrieving lotto number history using local storage.
             */
            const storage = {
                /**
                 * Saves generated combinations to local storage.
                 * @param {number[][]} combinations - Array of lotto number combinations.
                 * @param {string} initial - User's initial or 'ë¹„íšŒì›'.
                 */
                saveHistory: (combinations, initial) => {
                    const history = JSON.parse(localStorage.getItem('lottoHistory') || '[]');
                    const timestamp = new Date().toLocaleString('ko-KR');
                    combinations.forEach(combo => {
                        history.unshift({ numbers: combo, initial: initial || 'ë¹„íšŒì›', timestamp });
                    });
                    localStorage.setItem('lottoHistory', JSON.stringify(history.slice(0, 50))); // Keep only the latest 50 entries
                },
                /**
                 * Retrieves lotto history from local storage.
                 * @returns {Array<Object>} - Array of history objects.
                 */
                getHistory: () => {
                    return JSON.parse(localStorage.getItem('lottoHistory') || '[]');
                },
                /**
                 * Clears all lotto history from local storage.
                 */
                clearHistory: () => {
                    localStorage.removeItem('lottoHistory');
                    showMessage('ìƒì„± ë²ˆí˜¸ íˆìŠ¤í† ë¦¬ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
                }
            };

            /**
             * Displays the user's generated number history.
             */
            const displayHistory = () => {
                const history = storage.getHistory();
                numberHistoryDiv.innerHTML = ''; // Clear existing history display
                if (history.length === 0) {
                    numberHistoryDiv.innerHTML = `<div class="text-center text-muted py-3"><i class="bi bi-info-circle"></i> ë²ˆí˜¸ë¥¼ ìƒì„±í•˜ë©´ íˆìŠ¤í† ë¦¬ê°€ í‘œì‹œë©ë‹ˆë‹¤</div>`;
                    return;
                }
                history.forEach(item => {
                    const historyItemDiv = document.createElement('div');
                    historyItemDiv.className = 'lotto-history-item';
                    const numbersContainer = document.createElement('div');
                    numbersContainer.className = 'lotto-history-numbers d-flex align-items-center';
                    item.numbers.forEach((num, index) => { // Added index for staggering
                        const ball = document.createElement('div');
                        ball.className = `lotto-ball-small ${getBallColor(num)}`;
                        ball.textContent = num;
                        ball.style.animationDelay = `${index * 0.07}s`; // Stagger animation for small balls
                        numbersContainer.appendChild(ball);
                    });
                    const infoSpan = document.createElement('small');
                    infoSpan.className = 'text-muted ms-2';
                    infoSpan.textContent = `(${item.initial} - ${item.timestamp})`;

                    historyItemDiv.appendChild(numbersContainer);
                    historyItemDiv.appendChild(infoSpan);
                    numberHistoryDiv.appendChild(historyItemDiv);
                });
            };

            /**
             * Searches and displays lotto numbers generated by a specific user initial.
             */
            const searchUserNumbers = () => {
                const searchTerm = searchInitialInput.value.trim().toLowerCase();
                const history = storage.getHistory();
                searchResultsDiv.innerHTML = ''; // Clear existing search results

                if (!searchTerm) {
                    searchResultsDiv.innerHTML = `<div class="text-center text-muted py-3"><i class="bi bi-info-circle"></i> ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ê³  ê²€ìƒ‰í•´ë³´ì„¸ìš”</div>`;
                    return;
                }

                const filteredResults = history.filter(item => item.initial.toLowerCase().includes(searchTerm));

                if (filteredResults.length === 0) {
                    searchResultsDiv.innerHTML = `<div class="text-center text-muted py-3"><i class="bi bi-exclamation-circle"></i> ê²€ìƒ‰ëœ ë²ˆí˜¸ê°€ ì—†ìŠµë‹ˆë‹¤.</div>`;
                    return;
                }

                filteredResults.forEach(item => {
                    const resultItemDiv = document.createElement('div');
                    resultItemDiv.className = 'lotto-history-item';
                    const numbersContainer = document.createElement('div');
                    numbersContainer.className = 'lotto-history-numbers d-flex align-items-center';
                    item.numbers.forEach((num, index) => { // Added index for staggering
                        const ball = document.createElement('div');
                        ball.className = `lotto-ball-small ${getBallColor(num)}`;
                        ball.textContent = num;
                        ball.style.animationDelay = `${index * 0.07}s`; // Stagger animation for small balls
                        numbersContainer.appendChild(ball);
                    });
                    const infoSpan = document.createElement('small');
                    infoSpan.className = 'text-muted ms-2';
                    infoSpan.textContent = `(${item.initial} - ${item.timestamp})`;

                    resultItemDiv.appendChild(numbersContainer);
                    resultItemDiv.appendChild(infoSpan);
                    searchResultsDiv.appendChild(resultItemDiv);
                });
            };

            /**
             * Refreshes the public log of generated numbers (simulated from local history for now).
             */
            const refreshPublicLog = () => {
                publicLogDiv.innerHTML = `<div class="text-center text-muted py-3"><div class="loading-spinner"></div> ë¡œë”© ì¤‘...</div>`;
                // Simulate fetching public log with local history for demonstration
                const history = storage.getHistory();
                setTimeout(() => {
                    publicLogDiv.innerHTML = '';
                    if (history.length === 0) {
                        publicLogDiv.innerHTML = `<div class="text-center text-muted py-3"><i class="bi bi-info-circle"></i> í˜„ì¬ ì‹¤ì‹œê°„ ìƒì„± ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</div>`;
                        return;
                    }
                    history.slice(0, 20).forEach(item => { // Displaying up to 20 recent logs
                        const logItemDiv = document.createElement('div');
                        logItemDiv.className = 'lotto-history-item';
                        const numbersContainer = document.createElement('div');
                        numbersContainer.className = 'lotto-history-numbers d-flex align-items-center';
                        item.numbers.forEach((num, index) => { // Added index for staggering
                            const ball = document.createElement('div');
                            ball.className = `lotto-ball-small ${getBallColor(num)}`;
                            ball.textContent = num;
                            ball.style.animationDelay = `${index * 0.07}s`; // Stagger animation for small balls
                            numbersContainer.appendChild(ball);
                        });
                        const infoSpan = document.createElement('small');
                        infoSpan.className = 'text-muted ms-2';
                        infoSpan.textContent = `(${item.initial} - ${item.timestamp})`;

                        logItemDiv.appendChild(numbersContainer);
                        logItemDiv.appendChild(infoSpan);
                        publicLogDiv.appendChild(logItemDiv);
                    });
                }, 500);
            };

            /**
             * Loads and displays the current week's lotto winning numbers (dummy data).
             */
            const loadCurrentLottoInfo = () => {
                currentLottoInfoDiv.innerHTML = `<div class="loading-spinner"></div>`;
                // Dummy data for current week's winning numbers
                setTimeout(() => {
                    const currentDraw = {
                        round: 1120,
                        date: '2025.06.14',
                        numbers: [3, 11, 19, 28, 35, 42],
                        bonus: 22
                    };
                    currentLottoInfoDiv.innerHTML = `
                        <p class="h5 fw-bold mb-3">${currentDraw.round}íšŒ ë¡œë˜ ë‹¹ì²¨ ë²ˆí˜¸ (${currentDraw.date})</p>
                        <div class="d-flex justify-content-center align-items-center gap-2 mb-3">
                            ${currentDraw.numbers.map((num, index) => `<div class="lotto-ball-preview ${getBallColor(num)}" style="animation-delay: ${index * 0.07}s;">${num}</div>`).join('')}
                            <div class="lotto-ball-preview bg-secondary ms-3" style="animation-delay: ${currentDraw.numbers.length * 0.07}s;">${currentDraw.bonus}</div>
                            <span class="ms-1 fw-bold">(ë³´ë„ˆìŠ¤)</span>
                        </div>
                        <p class="text-muted small">ì‹¤ì œ ë‹¹ì²¨ ì •ë³´ì™€ëŠ” ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    `;
                }, 700);
            };

            /**
             * Loads and displays weekly rank statistics (dummy data).
             */
            const loadWeeklyRankStats = () => {
                weeklyRankStatsDiv.innerHTML = `<div class="text-center text-muted py-3"><div class="loading-spinner"></div> ë“±ê¸‰ë³„ ë‹¹ì²¨ í˜„í™© ë¡œë”© ì¤‘...</div>`;
                // Dummy data for weekly rank stats
                setTimeout(() => {
                    weeklyRankStatsDiv.innerHTML = `
                        <div class="table-responsive">
                            <table class="table table-bordered table-striped text-center">
                                <thead class="table-light">
                                    <tr>
                                        <th>ë“±ê¸‰</th>
                                        <th>ë‹¹ì²¨ì ìˆ˜ (ì‚¬ì´íŠ¸ ë‚´)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr><td>1ë“±</td><td>0ëª…</td></tr>
                                    <tr><td>2ë“±</td><td>0ëª…</td></tr>
                                    <tr><td>3ë“±</td><td>3ëª…</td></tr>
                                    <tr><td>4ë“±</td><td>25ëª…</td></tr>
                                    <tr><td>5ë“±</td><td>120ëª…</td></tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="text-muted small mt-2">* ì´ í†µê³„ëŠ” ì´ ì‚¬ì´íŠ¸ë¥¼ í†µí•´ ìƒì„±ëœ ë²ˆí˜¸ ê¸°ì¤€ì…ë‹ˆë‹¤.</p>
                    `;
                }, 800);
            };

            /**
             * Loads and displays upcoming draw statistics (dummy data).
             */
            const loadUpcomingDrawStats = () => {
                upcomingDrawStatsDiv.innerHTML = `<div class="text-center text-muted py-5"><div class="loading-spinner"></div> ì´ë²ˆ ì£¼ ì¶”ì²¨ í†µê³„ ë¡œë”© ì¤‘...</div>`;
                // Dummy data for upcoming draw stats
                setTimeout(() => {
                    upcomingDrawStatsDiv.innerHTML = `
                        <div class="row g-3">
                            <div class="col-md-4">
                                <div class="bg-light p-3 rounded text-center shadow-sm">
                                    <h6 class="fw-bold">ì´ ìƒì„± ì¡°í•©</h6>
                                    <p class="h4 text-primary">15,423</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="bg-light p-3 rounded text-center shadow-sm">
                                    <h6 class="fw-bold">ê°€ì¥ ë§ì´ ì„ íƒëœ ë²ˆí˜¸</h6>
                                    <div class="d-flex justify-content-center align-items-center">
                                        <div class="lotto-ball-small ${getBallColor(34)}" style="animation-delay: 0s;">34</div>
                                        <div class="lotto-ball-small ${getBallColor(12)}" style="animation-delay: 0.07s;">12</div>
                                        <div class="lotto-ball-small ${getBallColor(27)}" style="animation-delay: 0.14s;">27</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="bg-light p-3 rounded text-center shadow-sm">
                                    <h6 class="fw-bold">ê°€ì¥ ì ê²Œ ì„ íƒëœ ë²ˆí˜¸</h6>
                                    <div class="d-flex justify-content-center align-items-center">
                                        <div class="lotto-ball-small ${getBallColor(9)}" style="animation-delay: 0s;">9</div>
                                        <div class="lotto-ball-small ${getBallColor(29)}" style="animation-delay: 0.07s;">29</div>
                                        <div class="lotto-ball-small ${getBallColor(22)}" style="animation-delay: 0.14s;">22</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="text-muted small mt-3">* ì´ ë°ì´í„°ëŠ” ì˜¤ì§ ì´ ì‚¬ì´íŠ¸ì—ì„œ ìƒì„±ëœ ë²ˆí˜¸ì— ëŒ€í•œ í†µê³„ì…ë‹ˆë‹¤.</p>
                    `;
                }, 900);
            };

            /**
             * Updates the display of top and bottom frequency numbers.
             */
            const updateTopBottomNumbers = () => {
                const top5 = freqData.slice(0, 5);
                const bottom5 = freqData.slice(-5).reverse();

                topNumbersDiv.innerHTML = top5.map(d => `<span class="badge rounded-pill text-bg-danger">${d.num}</span>`).join('');
                bottomNumbersDiv.innerHTML = bottom5.map(d => `<span class="badge rounded-pill text-bg-info">${d.num}</span>`).join('');
            };

            /**
             * Filters and displays FAQ answers based on search input.
             */
            const filterFaqs = () => {
                const searchTerm = faqSearchInput.value.toLowerCase().trim();
                let foundAnswer = false;

                if (searchTerm === "") {
                    faqAnswerDisplay.innerHTML = `<p class="text-muted text-center"><i class="bi bi-info-circle"></i> ì§ˆë¬¸ì„ ì…ë ¥í•˜ì‹œë©´ ë‹µë³€ì´ í‘œì‹œë©ë‹ˆë‹¤.</p>`;
                    return;
                }

                // ì§ˆë¬¸ê³¼ ë‹µë³€ì„ ëª¨ë‘ ê²€ìƒ‰í•˜ì—¬ ì¼ì¹˜í•˜ëŠ” ë‚´ìš©ì´ ìˆìœ¼ë©´ í‘œì‹œ
                for (const item of faqData) {
                    if (item.question.toLowerCase().includes(searchTerm) || item.answer.toLowerCase().includes(searchTerm)) {
                        faqAnswerDisplay.innerHTML = `
                            <p class="fw-bold mb-2">${item.question}</p>
                            <p>${item.answer}</p>
                        `;
                        foundAnswer = true;
                        break; // ì²« ë²ˆì§¸ ì¼ì¹˜í•˜ëŠ” ë‹µë³€ì„ ì°¾ìœ¼ë©´ ì¢…ë£Œ
                    }
                }

                if (!foundAnswer) {
                    faqAnswerDisplay.innerHTML = `<p class="text-danger text-center"><i class="bi bi-exclamation-circle"></i> ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ í‚¤ì›Œë“œë¡œ ê²€ìƒ‰í•´ ë³´ì„¸ìš”.</p>`;
                }
            };

            /**
             * Populates FAQ examples and adds click listeners.
             */
            const displayFaqExamples = () => {
                faqExamplesDiv.innerHTML = ''; // Clear existing examples
                // Use all questions from faqData for examples
                faqData.forEach(item => {
                    const exampleSpan = document.createElement('span');
                    exampleSpan.className = 'faq-example-item';
                    exampleSpan.textContent = item.question;
                    exampleSpan.addEventListener('click', () => {
                        faqSearchInput.value = item.question;
                        filterFaqs();
                    });
                    faqExamplesDiv.appendChild(exampleSpan);
                });
            };


            // Event Listeners
            quickGenerateBtn.addEventListener('click', () => generateNumbers(false)); // Quick generation
            filterGenerateBtn.addEventListener('click', () => generateNumbers(true)); // Filtered generation
            resetFiltersBtn.addEventListener('click', resetFilters); // Reset only filters
            resetAllOptionsBtn.addEventListener('click', resetAllOptions); // Reset all options
            copyGeneratedBtn.addEventListener('click', copyResults);
            analyzeNumbersBtn.addEventListener('click', analyzeNumbersWithAI); // AI ë¶„ì„ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            faqSearchInput.addEventListener('keyup', filterFaqs); // FAQ ê²€ìƒ‰ ì…ë ¥ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ í™œì„±í™”

            // Dummy image export and share functions (for demonstration purposes)
            const imageExport = {
                downloadImage: () => { showMessage('ì´ë¯¸ì§€ ì €ì¥ ê¸°ëŠ¥ì€ í˜„ì¬ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤.'); },
                shareImage: () => { showMessage('ì´ë¯¸ì§€ ê³µìœ  ê¸°ëŠ¥ì€ í˜„ì¬ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤.'); }
            };
            // Make these functions globally accessible for inline onclick attributes
            window.imageExport = imageExport;
            window.storage = storage;
            window.refreshPublicLog = refreshPublicLog;
            window.searchUserNumbers = searchUserNumbers;

            // Initial Loads on page load
            displayHistory();
            refreshPublicLog();
            loadCurrentLottoInfo();
            loadWeeklyRankStats();
            loadUpcomingDrawStats();
            displayFaqExamples(); // Load FAQ examples on page load
            filterFaqs(); // Initialize FAQ answer display


            // --- Chart.js ---
            // Sample frequency data for the chart (dummy data)
            const freqData = [
                {num:34, count:20}, {num:43, count:19}, {num:12, count:19}, {num:27, count:18}, {num:13, count:18},
                {num:1, count:18}, {num:17, count:17}, {num:4, count:17}, {num:39, count:17}, {num:33, count:17},
                {num:18, count:16}, {num:20, count:16}, {num:2, count:16}, {num:38, count:15}, {num:10, count:15},
                {num:6, count:15}, {num:44, count:15}, {num:7, count:14}, {num:40, count:14}, {num:37, count:14},
                {num:11, count:14}, {num:42, count:14}, {num:24, count:14}, {num:36, count:14}, {num:21, count:14},
                {num:3, count:13}, {num:31, count:13}, {num:45, count:13}, {num:14, count:13}, {num:26, count:12},
                {num:5, count:12}, {num:16, count:12}, {num:35, count:12}, {num:8, count:11}, {num:15, count:11},
                {num:25, count:11}, {num:30, count:10}, {num:32, count:10}, {num:41, count:10}, {num:19, count:9},
                {num:23, count:9}, {num:22, count:8}, {num:28, count:8}, {num:29, count:7}, {num:9, count:6}
            ].sort((a, b) => b.count - a.count);

            // Prepare data for Chart.js, ensuring all numbers 1-45 are present
            const sortedFreqDataForChart = [...Array(45)].map((_, i) => {
                const num = i + 1;
                const found = freqData.find(d => d.num === num);
                return found || { num, count: 0 }; // If number not in dummy data, set count to 0
            }).sort((a, b) => a.num - b.num); // Sort by number for chart display

            const ctx = document.getElementById('frequencyChart').getContext('2d');
            const frequencyChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: sortedFreqDataForChart.map(d => d.num), // Lotto numbers as labels
                    datasets: [{
                        label: 'ì¶œí˜„ íšŸìˆ˜', // Label for the dataset
                        data: sortedFreqDataForChart.map(d => d.count), // Frequency counts as data
                        backgroundColor: sortedFreqDataForChart.map(d => {
                            if (d.count >= 18) return 'rgba(239, 68, 68, 0.7)'; // Hot numbers (red)
                            if (d.count <= 10) return 'rgba(59, 130, 246, 0.7)'; // Cold numbers (blue)
                            return 'rgba(156, 163, 175, 0.6)'; // Normal numbers (gray)
                        }),
                        borderColor: sortedFreqDataForChart.map(d => {
                           if (d.count >= 18) return 'rgba(239, 68, 68, 1)';
                           if (d.count <= 10) return 'rgba(59, 130, 246, 1)';
                           return 'rgba(156, 163, 175, 1)';
                        }),
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'x', // Horizontal bars
                    responsive: true,
                    maintainAspectRatio: false, // Allow chart to resize freely
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'íšŸìˆ˜'
                            }
                        },
                        x: {
                           title: {
                                display: true,
                                text: 'ë¡œë˜ ë²ˆí˜¸'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false // Hide legend
                        },
                        tooltip: {
                            callbacks: {
                                title: function(context) {
                                    return `ë²ˆí˜¸: ${context[0].label}`; // Custom tooltip title
                                },
                                label: function(context) {
                                    return `ì¶œí˜„ íšŸìˆ˜: ${context.raw}`; // Custom tooltip label
                                }
                            }
                        }
                    }
                }
            });

            // Update top/bottom numbers display next to the chart
            updateTopBottomNumbers();

            // --- Three.js for Announcer (Left Canvas) ---
            window.addEventListener('load', () => {
                const announcerCanvas = document.getElementById('announcerCanvas');
                if (!announcerCanvas) return; // Exit if canvas not found

                let scene, camera, renderer, controls, announcerGroup, microphone;

                function initAnnouncerScene() {
                    scene = new THREE.Scene();
                    scene.background = new THREE.Color(0xdbe9ff); // Light blue background

                    camera = new THREE.PerspectiveCamera(75, announcerCanvas.clientWidth / announcerCanvas.clientHeight, 0.1, 1000);
                    camera.position.set(0, 1.5, 3); // Adjust camera position

                    renderer = new THREE.WebGLRenderer({ canvas: announcerCanvas, antialias: true, alpha: true });
                    renderer.setSize(announcerCanvas.clientWidth, announcerCanvas.clientHeight);
                    renderer.setPixelRatio(window.devicePixelRatio);

                    // Lights
                    const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
                    scene.add(ambientLight);
                    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
                    directionalLight.position.set(5, 5, 5).normalize();
                    scene.add(directionalLight);

                    // Controls
                    controls = new THREE.OrbitControls(camera, renderer.domElement);
                    controls.enableZoom = false;
                    controls.enablePan = false;
                    controls.enableDamping = true;
                    controls.dampingFactor = 0.05;
                    controls.minPolarAngle = Math.PI / 2 - 0.2; // Limit vertical rotation
                    controls.maxPolarAngle = Math.PI / 2 + 0.2;
                    controls.autoRotate = true; // Auto-rotate for dynamic feel
                    controls.autoRotateSpeed = 0.5; // Slower auto-rotation

                    // Announcer Figure (Abstract)
                    announcerGroup = new THREE.Group();
                    const bodyMaterial = new THREE.MeshStandardMaterial({ color: 0x64b5f6, flatShading: true }); // Blue
                    const headMaterial = new THREE.MeshStandardMaterial({ color: 0xffcc80, flatShading: true }); // Skin tone
                    const micMaterial = new THREE.MeshStandardMaterial({ color: 0x90a4ae, flatShading: true }); // Gray

                    // Body
                    const body = new THREE.Mesh(new THREE.BoxGeometry(0.5, 1.0, 0.3), bodyMaterial);
                    body.position.y = 0.5;
                    announcerGroup.add(body);

                    // Head
                    const head = new THREE.Mesh(new THREE.SphereGeometry(0.3, 32, 16), headMaterial);
                    head.position.y = 1.3;
                    announcerGroup.add(head);

                    // Arm (simple cylinder)
                    const arm = new THREE.Mesh(new THREE.CylinderGeometry(0.1, 0.1, 0.7, 32), bodyMaterial);
                    arm.position.set(0.3, 0.8, 0);
                    arm.rotation.z = Math.PI / 6;
                    announcerGroup.add(arm);

                    // Microphone
                    const micHandle = new THREE.Mesh(new THREE.CylinderGeometry(0.05, 0.05, 0.4, 32), micMaterial);
                    micHandle.position.set(0.55, 0.55, 0.1);
                    micHandle.rotation.z = Math.PI / 2;
                    announcerGroup.add(micHandle);

                    const micHead = new THREE.Mesh(new THREE.SphereGeometry(0.08, 16, 8), micMaterial);
                    micHead.position.set(0.75, 0.55, 0.1);
                    announcerGroup.add(micHead);

                    scene.add(announcerGroup);

                    // Responsive resizing
                    window.addEventListener('resize', onAnnouncerWindowResize, false);
                }

                function onAnnouncerWindowResize() {
                    if (!announcerCanvas) return; // Guard against null canvas
                    const parent = announcerCanvas.parentElement;
                    renderer.setSize(parent.clientWidth, parent.clientHeight);
                    camera.aspect = parent.clientWidth / parent.clientHeight;
                    camera.updateProjectionMatrix();
                }

                function animateAnnouncer() {
                    requestAnimationFrame(animateAnnouncer);
                    controls.update(); // only required if controls.enableDamping or controls.autoRotate are set to true
                    renderer.render(scene, camera);
                }

                if (announcerCanvas) {
                    initAnnouncerScene();
                    animateAnnouncer();
                }
            });

            // --- Three.js for Lotto Visualization (Right Canvas) ---
            window.addEventListener('load', () => {
                const lottoVizCanvas = document.getElementById('lottoVizCanvas');
                if (!lottoVizCanvas) return; // Exit if canvas not found

                let scene, camera, renderer, controls, lottoBalls = [];

                function initLottoVizScene() {
                    scene = new THREE.Scene();
                    scene.background = new THREE.Color(0xdbe9ff); // Light blue background

                    camera = new THREE.PerspectiveCamera(75, lottoVizCanvas.clientWidth / lottoVizCanvas.clientHeight, 0.1, 1000);
                    camera.position.set(0, 0, 3); // Adjust camera position for horizontal view

                    renderer = new THREE.WebGLRenderer({ canvas: lottoVizCanvas, antialias: true, alpha: true });
                    renderer.setSize(lottoVizCanvas.clientWidth, lottoVizCanvas.clientHeight);
                    renderer.setPixelRatio(window.devicePixelRatio);

                    // Lights
                    const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
                    scene.add(ambientLight);
                    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
                    directionalLight.position.set(5, 5, 5).normalize();
                    scene.add(directionalLight);

                    // Controls
                    controls = new THREE.OrbitControls(camera, renderer.domElement);
                    controls.enableZoom = false;
                    controls.enablePan = false;
                    controls.enableDamping = true;
                    controls.dampingFactor = 0.05;
                    controls.autoRotate = true; // Auto-rotate for dynamic feel
                    controls.autoRotateSpeed = -0.5; // Slower auto-rotation, opposite direction
                    controls.minPolarAngle = Math.PI / 2 - 0.2; // Limit vertical rotation
                    controls.maxPolarAngle = Math.PI / 2 + 0.2;


                    // Create 6 lotto balls
                    const ballColors = [0xFFD700, 0x1E90FF, 0xDC143C, 0x6A5ACD, 0x32CD32, 0xFF4500]; // Yellow, Blue, Red, Slate Blue, Green, Orange Red
                    const ballNumbers = [4, 5, 23, 37, 41, 44]; // Example numbers

                    const geometry = new THREE.SphereGeometry(0.5, 32, 16);
                    const spacing = 1.2;
                    const startX = -((ballColors.length - 1) * spacing) / 2; // Center the row of balls

                    for (let i = 0; i < ballColors.length; i++) {
                        const material = new THREE.MeshStandardMaterial({ color: ballColors[i], metalness: 0.3, roughness: 0.2 });
                        const ball = new THREE.Mesh(geometry, material);
                        ball.position.x = startX + i * spacing;
                        ball.userData.originalPosition = ball.position.clone(); // Store original position
                        lottoBalls.push(ball);
                        scene.add(ball);

                        // Add 3D text for numbers (simple approach)
                        const loader = new THREE.FontLoader();
                        // This would require loading a font, which complicates a single HTML file without a bundler.
                        // For simplicity, let's skip 3D text and just have colored balls for now.
                        // Or use a more complex setup if 3D text is a hard requirement.
                        // Given it's a "visual effect", the colored balls are sufficient.
                    }

                    // Responsive resizing
                    window.addEventListener('resize', onLottoVizWindowResize, false);
                }

                function onLottoVizWindowResize() {
                    if (!lottoVizCanvas) return; // Guard against null canvas
                    const parent = lottoVizCanvas.parentElement;
                    renderer.setSize(parent.clientWidth, parent.clientHeight);
                    camera.aspect = parent.clientWidth / parent.clientHeight;
                    camera.updateProjectionMatrix();
                }

                function animateLottoViz() {
                    requestAnimationFrame(animateLottoViz);
                    controls.update(); // only required if controls.enableDamping or controls.autoRotate are set to true

                    // Subtle animation for balls
                    lottoBalls.forEach((ball, index) => {
                        ball.rotation.x += 0.005;
                        ball.rotation.y += 0.005;
                        // Small vertical floating motion
                        ball.position.y = ball.userData.originalPosition.y + Math.sin(Date.now() * 0.001 + index) * 0.1;
                    });

                    renderer.render(scene, camera);
                }

                if (lottoVizCanvas) {
                    initLottoVizScene();
                    animateLottoViz();
                }
            });
        });
    </script>
</body>
</html>
